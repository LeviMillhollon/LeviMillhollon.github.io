if (self.CavalryLogger) { CavalryLogger.start_js(["5WowL"]); }

__d('MPhotoStage',['setTimeoutAcrossTransitions','CSS','cx','DOM','Stratcom','Vector','MLegacyDataStore','MURI','MRequest','MViewport','MInputFocus','MJSEnvironment','prefetchImage'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=false,v='photo-stage',w='photo-image',x='facebox',y='new-tag-placeholder',z='photos-input-tag-notice',aa='photos-input-tag',ba='photo-tag-loading',ca='popup-nub',da='tokenizer-input',ea='transfer-focus-container',fa=2000,ga=200,ha=null,ia=null,ja=null,ka=null;function la(ta,ua,va){var wa=0,xa=q.getUseableWidth();if(va>xa){wa=va-xa;}else if(ua<0)wa=ua;if(wa===0)return ta;return new m(ta.x-wa,ta.y);}function ma(ta){if(!ta)return;i.conditionClass(ta,"_57-n",!!ja);if(ja){clearTimeout(ja);ja=null;}else ja=h(function(){ma(ta);},fa);}function na(){ha=null;while(ka.length)ka.pop().remove();u=false;if(ja){clearTimeout(ja);ja=null;}}function oa(ta){var ua=m.getPos(ta),va=m.getDim(ta),wa=m.getPos(ha),xa=new m(ua.x+va.x/2,ua.y+va.x-wa.y),ya=k.find(ha,'*',ba);xa.setPos(ya);k.show(ya);}function pa(ta,ua,va){var wa=new o(ta.write_tag_uri);wa.addQueryData('id',ta.owner_id);wa.addQueryData('facebox_id',ua.facebox_id);wa.addQueryData('replace_id',y);wa.addQueryData('sd_source',ta.source);wa.addQueryData('sd_set',ta.set);var xa={};xa['ids['+va+']']=va;xa['x['+va+']']=ua.facebox_center.x;xa['y['+va+']']=ua.facebox_center.y;var ya=new p(wa.normalize().toString()).addData(xa);return ya;}function qa(ta,ua){ia=ta;var va=k.find(ha,'*',aa),wa=k.find(ha,'*',z),xa=m.getPos(ha),ya=m.getPos(ta),za=m.getDim(ta),ab=new m(ya.x+za.x/2,ya.y+za.y-xa.y),bb=la(ab,ab.x-ga/2,ab.x+ga/2),cb=k.find(va,'*',ca);cb.style.left=ab.x-bb.x+"px";var db=n.get(ia);if(db.suggestions)ua.tokenizer.updateSuggestionsIds(db.suggestions);bb.setPos(va);k.show(va);k.show(wa);var eb=k.find(va,'*',da);eb.focus();r.scrollTo(eb,ya.y);if(ja){clearTimeout(ja);ja=null;}}function ra(ta){var ua=k.find(ha,'*',aa),va=k.find(ha,'*',z);if(ia){var wa=n.get(ia),xa=n.get(ha),ya=pa(xa,wa,ta);oa(ia);ya.listen('finally',function(){var za=k.find(ha,'*',ba);k.hide(za);ma(ha);});ya.send();k.hide(ia);k.hide(ua);k.hide(va);k.find(ua,'*',da).blur();ia=null;}ja=h(function(){ma(ha);},fa);}var sa=function ta(ua,va){if(u)return;ha=ua;u=true;var wa='touchend';if(s.IS_ANDROID)wa='click';if(va&&va.use_faceboxes){ka=[l.listen(wa,v,function(event){if(ia){var ya=k.find(ha,'*',aa),za=k.find(ha,'*',z);k.find(ya,'*',da).blur();k.hide(ya);k.hide(za);ia=null;event.kill();}else ma(event.getNode(v));}),l.listen(wa,x,function(event){var ya=k.find(ha,'*',ea),za=event.getNode(x);qa(za,ya);event.kill();}),l.listen(wa,ea,function(event){var ya=event.getNode(ea),za=k.find(ya,'*',da);za.focus();if(ia)r.scrollTo(za,m.getPos(ia).y);event.kill();}),l.listen('Tokenizer-addedtoken',null,function(event){ra(event.getData().rel);})];}else ka=[l.listen('touchend',v,function(event){ma(event.getNode(v));})];ka.push(l.listen('m:page:unload',null,na));var xa=k.scry(ha,'*',w);if(xa.length>0&&n.get(xa[0]).imgsrc){t(n.get(xa[0]).imgsrc,function(){return ma(ha);});}else ma(ha);};g.main=sa;}),null);
__d('MTouchAfro',['CSS','MLegacyDataStore','DOM','MModalDialog','MRequest','MXUIDiv.react','Parent','React','ReactDOM','Set','Stratcom','URI','$','csx','cx','fbt','ge','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=null,aa=null,ba=null,ca=null,da={renderNFXReport:function ea(fa,ga){y(function(){h.hide(fa);da.openDialog(ga);},500);},initUndoHide:function ea(){if(z!==null)return;z=r.listen('click','afro-undo-hide',function(fa){var ga=fa.getNode('undo-content'),ha=i.get(ga).storyDomID;j.hide(ga);j.show(t(ha));});r.listen('m:page:unload',null,function(){z.remove();r.removeCurrentListener();});},hideOriginalContent:function ea(fa){j.hide(t(fa));},initDoneListener:function ea(fa,ga){if(aa!==null)return;aa=r.listen('click','nfx-dialog-done',function(ha){if(fa){var ia=t(fa);if(ia){var ja=i.get(ia).enhancedAfro;if(ja)h.addClass(ia,"_2gft");}p.render(o.createElement(m,{padding:'large',fontshade:'medium',fontweight:'bold'},w._("Thanks for letting us know.")),t(fa));if(ga){var ka=x(ga);if(ka){j.remove(ka);h.removeClass(n.bySelector(t(fa),"._2b01"),"_2b01");}}}k.close();});r.listen('m:page:unload',null,function(){aa.remove();r.removeCurrentListener();});},showConfirmationPopup:function ea(fa,ga){var ha=confirm(fa);if(ha){var ia=new l(ga);ia.send();}},showInlineConfirmation:function ea(fa,ga){var ha=t(fa);j.hide(ha);j.insertAfter(ha,ga);var ia=j.scry(ga,'a','touchable');if(ia[0])ia[0].focus();},redirect:function ea(fa,ga){if(!ga){window.location=fa;}else{var ha=new l(fa);ha.send();}},redirectOnClick:function ea(fa,ga){r.listen('click',ga,function(ha){window.location=fa;});},openDialog:function ea(fa){k.open(fa);},openDialogOnClick:function ea(fa,ga){var ha=r.listen('click',ga,function(ia){k.open(fa);});r.listen('m:page:unload',null,function(){ha.remove();r.removeCurrentListener();});},initActionsTakenStore:function ea(){ca=false;if(ba!==null)return;ba=new q();var fa=r.listen('m-nfx-action-taken',null,function(ga){return ba.add(ga.getData());});r.listen('m:page:unload',null,function(){fa.remove();r.removeCurrentListener();});},clearActionsTakenStore:function ea(){ba=new q();},invokeActionTaken:function ea(fa){r.invoke('m-nfx-action-taken',null,fa);},checkActionAgainstStore:function ea(fa){var ga=i.get(fa),ha=false;ba.forEach(function(ia){if(ia.action===ga.action&&ia.label===ga.label)ha=true;});return ha;},addCancelButtonListener:function ea(fa){var ga=t('modalDialog');j.listen(ga,'click','dialog-cancel-button-alt',function(ha){ha.kill();if(ca){k.close();return;}ca=true;var ia=new s(fa);new l(ia).send();});},dialogLoadConfirmationScreenOnClick:function ea(fa,ga){j.listen(fa,'click',null,function(ha){ha.kill();if(ca){k.close();return;}ca=true;var ia=new s(ga);ia.addQueryData('g_actions',JSON.stringify(Array.from(ba)));new l(ia).send();});},logReportAdLinkClick:function ea(fa,ga){var ha=j.listen(fa,'click',null,function(){new l(ga).send();});r.listen('m:page:unload',null,function(){ha.remove();r.removeCurrentListener();});},setupWildeDoneButton:function ea(){window.addEventListener('fbActionButtonClick',function(){return window.__fbNative.close();});}};f.exports=da;}),null);
__d("MImagePreloader",[],(function a(b,c,d,e,f,g){function h(i){for(var j=0;j<i.length;j++){var k=new Image();k.src=i[j];}}g.init=h;}),null);