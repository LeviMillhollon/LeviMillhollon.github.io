if (self.CavalryLogger) { CavalryLogger.start_js(["4i5s7"]); }

__d('Dispatcher_DEPRECATED',['invariant','monitorCodeUse'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='ID_';function k(){this.$Dispatcher_DEPRECATED1={};this.$Dispatcher_DEPRECATED2=false;this.$Dispatcher_DEPRECATED3={};this.$Dispatcher_DEPRECATED4={};this.$Dispatcher_DEPRECATED5=1;}k.prototype.register=function(n,o){o=this.__genID(o);this.$Dispatcher_DEPRECATED1[o]=n;return o;};k.prototype.unregister=function(n){this.$Dispatcher_DEPRECATED1[n]||h(0);delete this.$Dispatcher_DEPRECATED1[n];};k.prototype.waitFor=function(n){this.$Dispatcher_DEPRECATED2||h(0);for(var o=0;o<n.length;o++){var p=n[o];if(this.$Dispatcher_DEPRECATED4[p]){this.$Dispatcher_DEPRECATED3[p]||h(0);continue;}this.$Dispatcher_DEPRECATED1[p]||h(0);this.$Dispatcher_DEPRECATED7(p);}};k.prototype.dispatch=function(n){m(this.$Dispatcher_DEPRECATED2,this.$Dispatcher_DEPRECATED6,n);this.$Dispatcher_DEPRECATED8(n);try{for(var o in this.$Dispatcher_DEPRECATED1){if(this.$Dispatcher_DEPRECATED4[o])continue;this.$Dispatcher_DEPRECATED7(o);}}finally{this.$Dispatcher_DEPRECATED9();}};k.prototype.isDispatching=function(){return this.$Dispatcher_DEPRECATED2;};k.prototype.$Dispatcher_DEPRECATED7=function(n){this.$Dispatcher_DEPRECATED4[n]=true;this.__invokeCallback(n,this.$Dispatcher_DEPRECATED1[n],this.$Dispatcher_DEPRECATED6);this.$Dispatcher_DEPRECATED3[n]=true;};k.prototype.__invokeCallback=function(n,o,p){o(p);};k.prototype.$Dispatcher_DEPRECATED8=function(n){for(var o in this.$Dispatcher_DEPRECATED1){this.$Dispatcher_DEPRECATED4[o]=false;this.$Dispatcher_DEPRECATED3[o]=false;}this.$Dispatcher_DEPRECATED6=n;this.$Dispatcher_DEPRECATED2=true;};k.prototype.$Dispatcher_DEPRECATED9=function(){delete this.$Dispatcher_DEPRECATED6;this.$Dispatcher_DEPRECATED2=false;};k.prototype.__genID=function(n){var o=n?n+'_':j;n=n||o+this.$Dispatcher_DEPRECATED5++;while(this.$Dispatcher_DEPRECATED1[n])n=o+this.$Dispatcher_DEPRECATED5++;return n;};function l(n){var o='<unknown>';if(!n)return o;if(typeof n.type==='string')return n.type;if(typeof n.actionType==='string')return n.actionType;if(!n.action)return o;if(typeof n.action.type==='string')return n.action.type;if(typeof n.action.actionType==='string')return n.action.actionType;return o;}function m(n,o,p){!n||h(0);}f.exports=k;}),18);
__d('ReactDispatcher_DEPRECATED',['Dispatcher_DEPRECATED','ReactDOM'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,h);k=j&&j.prototype;l.prototype.dispatch=function(m){i.unstable_batchedUpdates(function(){k.dispatch.call(this,m);}.bind(this));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('MActorSelectorNuxDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g,h){f.exports=new h();}),null);
__d("XFeedUFICommentHistoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/ufi\/{comment_token}\/history\/",{comment_token:{type:"String",required:true},replace_id:{type:"String",required:true}});}),null);
__d("XFeedUFICommentsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/ufi\/",{fs:{type:"Int"},feedback_target:{type:"String",required:true},focus_composer:{type:"Bool",defaultValue:false},replace_id:{type:"String",required:true},share_id:{type:"String"},link_data:{type:"String"},action_source:{type:"Int"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}});}),null);
__d("XFeedUFILikesController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/ufi\/likes\/",{feedback_target:{type:"String",required:true},replace_id:{type:"String",required:true},link_data:{type:"String"}});}),null);
__d("XFeedUFIReactionsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/ufi\/reactions\/",{feedback_target:{type:"String",required:true},replace_id:{type:"String",required:true},link_data:{type:"String"}});}),null);
__d('MFeedUFI',['ActorURI','CSS','DOM','MJSEnvironment','MLegacyDataStore','MParent','MRequest','MViewport','Stratcom','Vector','XFeedUFICommentHistoryController','XFeedUFICommentsController','XFeedUFILikesController','XFeedUFIReactionsController','$','cx','ge','getActiveElement','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa='feed-ufi',ba='replies-see-more',ca='m-inline-reply-composer',da={COMMENTS:'comments',LIKES:'likes',REACTIONS:'reactions',HISTORY:'history',NONE:''},ea="_1vcf",fa="_53xw",ga='preview_rid',ha='comment_id',ia,ja,ka,la,ma,na,oa,pa,qa,ra=null,sa=null,ta=null;function ua(){if(ta){i.removeClass(ta,ea);ta=null;}}function va(nc){ua();if(nc){i.addClass(nc,ea);ta=nc;}}var wa=null;function xa(){if(wa){i.removeClass(wa,fa);wa=null;}}function ya(nc){xa();if(nc){i.addClass(nc,fa);wa=nc;}}function za(){if(na)return;oa=[p.listen('click',[aa,'composer-submit'],bc),p.listen('click','like',yb),p.listen('focus',[aa,'textarea'],vb),p.listen('multi-photos-change',null,cc),p.listen('MCommentEdit:showcomposer',null,dc),p.listen('MUFICommentReplyLink:show-inline-composer',null,ec),p.listen('MStickerSelector:show-sticker-selector',null,fc),p.listen('m:page:unload',null,gb)];if(k.IS_APPLE_WEBKIT_IOS)oa.push(p.listen('focus',[aa,'editCommentTextArea'],xb));na=true;}function ab(){if(!ma)return;j.find(ma,'*','textarea').blur();}function bb(){if(!ma)return;j.find(ma,'*','textarea').focus();}function cb(){if(!ma)return;var nc=j.find(ma,'*','textarea');if(y()===nc)o.scrollTo(0,q.getPos(nc).y+nc.offsetHeight-o.getScreenHeight());}function db(nc){if(!nc)return;var oc=eb(),pc=nc.offsetTop,qc=nc.offsetHeight,rc=pc+qc,sc=oc.getScrollTop(),tc=oc.getScrollHeight(),uc=sc+tc;if(pc<sc||rc>uc)if(pc<sc||qc>tc){ic(Math.max(0,pc));}else ic(Math.max(0,sc+(rc-uc)));}function eb(){return l.get(la).scrollArea;}function fb(){if(!qa)qa=j.scry(document,'div',aa)[0];return qa;}function gb(){while(oa.length)oa.pop().remove();hb();mb();ua();ia=null;ja=null;ka=null;qa=null;na=false;}function hb(){if(!ra)return;while(ra.length)ra.pop().remove();ra=null;}function ib(nc,oc,pc,qc){var rc=qc||{},sc=rc.parent_id,tc=rc.preload_reply_composer_uri_val,uc=rc.highlighted_preload_composer_input_id;ua();xa();lb(pc,sc,uc);var vc=lc(nc);jc(false);if(vc===ia){if(oc)bb();kc(da.COMMENTS);p.invoke('m:feed-ufi-flyout:comments-displayed');return;}ia=vc;kc(da.NONE);var wc=j.find(fb(),'div','feed-ufi-comments').id,xc=s.getURIBuilder().setString('feedback_target',vc).setString('replace_id',wc).setBool('focus_composer',!!oc),yc=l.get(nc).feedback_source;if(yc)xc.setInt('fs',yc);var zc=l.get(nc).share_id;if(zc)xc.setString('share_id',zc.toString());var ad=l.get(nc).action_source;if(ad===undefined)ad=20;var bd=mc(nc);if(bd)xc.setString('link_data',bd);xc=xc.getURI();if(tc)xc.addQueryData(ga,tc);if(uc)xc.addQueryData(ha,sc||pc);var cd=l.get(nc).actor_id;if(cd)xc=h.create(xc,cd);pa=new n(xc.toString());pa.listen('finally',function(){pa=null;});pa.send();}function jb(nc){var oc=x(nc+'');if(oc&&la&&la.contains(oc)){ic(oc.offsetTop);return oc;}return null;}function kb(nc){var oc=nc?x(nc+''):null;if(oc&&la&&la.contains(oc)){var pc=m.bySigil(oc,ca);if(pc)return pc;}return null;}function lb(nc,oc,pc){mb();if(nc)sa=p.listen('m:feed-ufi-flyout:comments-displayed',null,function(){setTimeout(function(){var qc=!!jb(nc);if(!qc&&oc){var rc=jb(oc),sc=rc&&j.scry(rc,'*',ba)[0];if(sc)va(sc);}var tc=kb(pc);if(tc)ya(tc);});mb();});}function mb(){if(sa){sa.remove();sa=null;}}function nb(nc){var oc=lc(nc);jc(true);if(oc===ja){kc(da.LIKES);return;}ja=oc;kc(da.NONE);var pc=j.find(fb(),'div','feed-ufi-likes').id,qc=t.getURIBuilder().setString('feedback_target',oc).setString('replace_id',pc).getURI();pa=new n(qc.toString());pa.listen('finally',function(){pa=null;});pa.send();}function ob(nc,oc,pc){var qc=lc(nc);jc(!oc);p.invoke('m:feed-ufi-flyout:reactions-displayed');if(qc===ka&&!pc){kc(da.REACTIONS);return;}ka=qc;kc(da.NONE);p.invoke('m:feed-ufi-flyout:cache-reset');var rc=j.find(fb(),'div','feed-ufi-reactions').id,sc=u.getURIBuilder().setString('feedback_target',qc).setString('replace_id',rc).getURI();pa=new n(sc.toString());pa.listen('finally',function(){pa=null;});pa.send();}function pb(nc){jc(true);kc(da.NONE);var oc=j.find(fb(),'div','feed-ufi-comment-history').id,pc=r.getURIBuilder().setString('comment_token',nc).setString('replace_id',oc).getURI();pa=new n(pc.toString());pa.listen('finally',function(){pa=null;});pa.send();}function qb(){kc(da.HISTORY);}function rb(){if(!pa)return;ia=null;ja=null;ka=null;pa.abort();pa=null;}function sb(){ia=null;ja=null;ka=null;}function tb(nc){var oc=lc(nc),pc=oc!==ia&&oc!==ka;kc(pc?da.NONE:da.COMMENTS);if(pc)p.invoke('m:feed-ufi-flyout:reset',null,{target_id:oc});}function ub(nc,oc){kc(da.COMMENTS);la=nc;ma=oc;p.invoke('m:feed-ufi-flyout:comments-displayed');}function vb(){wb();}function wb(){p.invoke('click','edit-link');}function xb(nc){if(ra)return;var oc=nc.getTarget();ra=[p.listen('MScrollArea:scrollend',null,function(){var pc=oc.selectionStart,qc=oc.selectionEnd;oc.setSelectionRange(Math.abs(pc-1),Math.abs(qc-1));oc.setSelectionRange(pc,qc);}),p.listen('blur',[aa,'editCommentTextArea'],function(){hb();})];}function yb(){ja=null;}function zb(nc){kc(da.LIKES);}function ac(nc){kc(da.REACTIONS);}function bc(event){var nc=event.getNode(ca);if(nc)return;var oc=fb();z(function(){var pc=j.find(oc,'div','feed-ufi-composer-placeholder');ic(pc.offsetTop);},0);i.conditionClass(j.find(oc,'div','feed-ufi-comments'),"_5jc2",true);}function cc(){if(!ma)return;var nc=fb();if(nc)i.conditionClass(fb(),"_5rpd",j.scry(ma,'input','m-multi-photos-photo').length);}function dc(nc){ic(nc.getData().composer.offsetTop);}function ec(nc){wb();var oc=nc.getData(),pc=oc.composerRoot;if(pc){db(pc);xa();setTimeout(function(){ya(pc);},0);}}function fc(nc){var oc=nc.getData(),pc=oc.selectorNode;db(pc);}function gc(nc){p.invoke('m:feed-ufi-flyout:comment-change');ic(v(nc).offsetTop);}function hc(){p.invoke('m:feed-ufi-flyout:comment-change');var nc=fb();if(j.scry(nc,'div','comment').length){eb().reflow();}else i.conditionClass(j.find(nc,'div','feed-ufi-comments'),"_5jc2",false);}function ic(nc){if(!la)return;var oc=eb();oc.reflow();z(function(){var pc=oc.getMaxScrollTop();if(nc!==undefined)pc=Math.min(nc,pc);oc.scrollTo(0,pc);},100);}function jc(nc){var oc=fb();if(oc)i.conditionClass(oc,"_5sd3",nc);}function kc(nc){var oc=fb();if(oc){i.conditionClass(oc,"_5m_y",nc==da.COMMENTS);i.conditionClass(oc,"_5m_z",nc==da.LIKES);i.conditionClass(oc,"_3b5-",nc==da.REACTIONS);i.conditionClass(oc,"_5ugy",nc==da.HISTORY);}}function lc(nc){return l.get(nc).feedback_target.toString();}function mc(nc){var oc=m.bySigil(nc,'story-div');if(!oc)return;var pc=l.get(oc).linkdata;if(pc)return pc.toString();return null;}g.blur=ab;g.cancel=rb;g.clearCache=sb;g.focus=bb;g.getRoot=fb;g.init=za;g.loadComments=ib;g.loadLikes=nb;g.loadReactions=ob;g.loadCommentHistory=pb;g.onCommentHistoryLoad=qb;g.onCommentAdded=gc;g.onCommentRemoved=hc;g.onCommentsLoad=ub;g.onLikesLoad=zb;g.onReactionsLoad=ac;g.reset=tb;g.scrollTo=cb;}),null);