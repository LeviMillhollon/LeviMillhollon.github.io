if (self.CavalryLogger) { CavalryLogger.start_js(["0tLU3"]); }

__d('MJewelNotifications',['Bootloader','ChannelEventType','MRequest','MURI','Run','Stratcom','SubscriptionsHandler','isFacebookURI'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';function p(q){this.$MJewelNotifications1=q;this.$MJewelNotifications2=[];this.$MJewelNotifications3=false;this.$MJewelNotifications4=false;this.$MJewelNotifications5=new n();this.$MJewelNotifications5.addSubscriptions(l.onLeave(function(){this.$MJewelNotifications5.release();}.bind(this)),m.listen(i.NOTIFICATIONS_NEW,null,this.onNotificationReceive.bind(this)));}p.prototype.getNotifications=function(){return this.$MJewelNotifications2;};p.prototype.registerListeners=function(){this.$MJewelNotifications5.addSubscriptions(m.listen(i.NOTIFICATIONS_READ,null,this.onNotificationRead.bind(this)),m.listen('click','live-notifications',this.onNotificationClick.bind(this)),m.listen('m:jewel:flyout:open',null,this.onJewelOpen.bind(this)));};p.prototype.onJewelOpen=function(event){var q=event.getData(),r=q&&q.jewel&&q.jewel==='notifications';if(r&&this.$MJewelNotifications4)this.updateUI();};p.prototype.onNotificationClick=function(event){var q=event.getNode('live-notification');if(!q)return;var r=q.getAttribute('data-alertid');this.readNotification(r);this.updateUI();new j('/a/jewel_notifications_log.php').addData({click_type:'jewel_notif_click',id:r}).send();};p.prototype.onNotificationRead=function(event){var q=event.getData();if(q&&q.alert_ids){q.alert_ids.forEach(function(r){this.readNotification(r);}.bind(this));this.updateUI();}};p.prototype.readNotification=function(q){this.$MJewelNotifications2.forEach(function(r){if(r.alert_id==q){if(r.unread)this.$MJewelNotifications4=true;r.unread=false;}}.bind(this));};p.prototype.addNotification=function(q){this.$MJewelNotifications2=this.$MJewelNotifications2.filter(function(r){return r.alert_id!==q.alert_id;});q.timestamp=Date.now();this.$MJewelNotifications2.push(q);this.$MJewelNotifications4=true;};p.prototype.onNotificationReceive=function(event){var q=event.getData();if(q&&q.data){if(q.data.type==='friend_confirmed')return;if(!this.$MJewelNotifications3){this.$MJewelNotifications3=true;this.registerListeners();}this.addNotification(q.data);this.updateUI();}};p.prototype.updateUI=function(){if(!this.$MJewelNotifications3||!this.$MJewelNotifications4)return;h.loadModules(["React","ReactDOM","MJewelNotificationList.react","Popover"],function(q,r,s,t){if(!t.getInstance('notifications_flyout').isOpen())return;var u={notifications:this.$MJewelNotifications2};r.render(q.createElement(s,u),this.$MJewelNotifications1);t.getInstance('notifications_flyout').refreshConstraints();this.$MJewelNotifications4=false;}.bind(this),'MJewelNotifications');};f.exports=p;}),null);
__d('MNotificationClick',['CSS','MLegacyDataStore','MRequest','Stratcom'],(function a(b,c,d,e,f,g,h,i,j,k){var l='notification',m='list_',n='acw',o='aclb',p={},q=false;f.exports={init:function v(){if(q)return;k.listen('click',l,r);k.listen('m:page:render:cache:complete',null,s);q=true;}};function r(event){var v=event.getNode('touchable');if(!v)return;var w=i.get(v).notif_id;if(!w)return;new j('/a/jewel_notifications_log.php').addData({click_type:'notification_click',id:w,target_id:i.get(v).target_id}).send();t(event);}function s(v){if(v.getData().path.indexOf('notifications')>-1)for(var w in p)u(w);}function t(event){var v=event.getNode('marea');if(!v)return;var w=v.getAttribute('id');if(!w)return;u(w);var x=w.startsWith(m)?w.substring(m.length):m+w;u(x);p[w]=true;p[x]=true;}function u(v){var w=document.getElementById(v);if(w){h.addClass(w,n);h.removeClass(w,o);}}}),null);
__d('MSearchConst',[],(function a(b,c,d,e,f,g){f.exports={refid:46,news_search:'news',video_search:'video',content_search:'content',msite_news_null_state:'mnns',msite_news_non_gs_null_state:'mnngns',event_click:'click',event_impression:'imp'};}),null);
__d('MSearchTypeaheadPerfLogger',['BanzaiScuba','CurrentUser','SubscriptionsHandler','performanceNow'],(function a(b,c,d,e,f,g,h,i,j,k){function l(m,n,o){'use strict';this._searchType=n.type;this._sampleRate=n.sample_rate;this._siteType=n.site;this._cacheEnable=o?1:0;this.init(m);this.initEvents();this._reset();}l.prototype.init=function(m){'use strict';this._data=m.getDatasource();this._typeahead=m;if(this._typeahead.props&&this._typeahead.props.vertical)this._vertical=this._typeahead.props.vertical;};l.prototype.initEvents=function(){'use strict';this._subscriptions=new j();this._subscriptions.addSubscriptions(this._data.listen('initial_render',this.initialRender.bind(this)),this._data.listen('after_complete',this.complete.bind(this)),this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this)),this._data.listen('req_sent',this.remoteRequestSent.bind(this)),this._data.listen('req_recv',this.remoteRequestReceived.bind(this)),this._typeahead.listen('update',this.queryStart.bind(this)),this._typeahead.listen('render_start',this.renderStart.bind(this)),this._typeahead.listen('rendered',this.rendered.bind(this)));};l.prototype.destroy=function(){'use strict';this._subscriptions.release();};l.prototype._reset=function(){'use strict';this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};l.prototype.initialRender=function(){'use strict';this._intialRenderTime=Date.now();};l.prototype.complete=function(){'use strict';this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};l.prototype.queryStart=function(m){'use strict';this._reset();this._originQuery=m;this._startTime=Date.now();};l.prototype.renderStart=function(){'use strict';this._renderStart=k();};l.prototype.rendered=function(){'use strict';this._rendered=k()-this._renderStart;};l.prototype.remoteRequestDispatch=function(m){'use strict';this._remoteRequestDispatchTime=Date.now();this._sid=m;};l.prototype.remoteRequestSent=function(){'use strict';this._remoteRequestSentTime=Date.now();};l.prototype.remoteRequestReceived=function(m){'use strict';this._remoteRequestReceivedTime=Date.now();this._resultLength=m;this._cacheOnly=0;};l.prototype.logToScuba=function(){'use strict';if(this._startTime===null)return;if(this._originQuery!==this._query)return;var m=new h('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{mtouchGKs:true}});m.addInteger('sample_rate',this._sampleRate);m.addNormal('typeahead_type',this._searchType);m.addNormal('site',this._siteType);if(this._vertical){m.addNormal('vertical',this._vertical);m.addNormal('search_mode',this._typeahead.state.searchMode);}m.addNormal('session_id',this._sid);m.addNormal('user_id',i.getID());m.addNormal('query',this._query);m.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)m.addInteger('rendered',this._rendered);if(this._cacheOnly===0){m.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));m.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));m.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));m.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));m.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));m.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}m.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));m.addInteger('num_result',this._resultLength);m.addNormal('is_cache_only',this._cacheOnly);m.addNormal('is_cache_enable',this._cacheEnable);m.post();};f.exports=l;}),null);
__d('MSearchTypeaheadPerfLoggerV2',['Banzai','Stratcom','SubscriptionsHandler','URI'],(function a(b,c,d,e,f,g,h,i,j,k){function l(m,n,o,p){'use strict';this.$MSearchTypeaheadPerfLoggerV211=3;this.$MSearchTypeaheadPerfLoggerV212=3;this.$MSearchTypeaheadPerfLoggerV22=n;this.$MSearchTypeaheadPerfLoggerV21=m;this.$MSearchTypeaheadPerfLoggerV24='mtouch_typeahead_log_perf';this.$MSearchTypeaheadPerfLoggerV25='mtouch_serp_log_perf';this.$MSearchTypeaheadPerfLoggerV28=p;this.$MSearchTypeaheadPerfLoggerV29='';this.$MSearchTypeaheadPerfLoggerV23={query:null,latencyData:[],typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:null,sessionStartTime:null,click:false,isBootstrapClick:false,isExactMatchKeywordClick:false,isNullStateClick:false,isSeeMoreClick:false};this.$MSearchTypeaheadPerfLoggerV214();this.$MSearchTypeaheadPerfLoggerV215();}l.prototype.$MSearchTypeaheadPerfLoggerV214=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV213=new j();this.$MSearchTypeaheadPerfLoggerV213.addSubscriptions(i.listen('m-typeahead-logger:new-session-id',null,function(m){this.$MSearchTypeaheadPerfLoggerV216(m.getData().sessionID,m.getData().query);}.bind(this)),i.listen('log-m-search-session-end',null,function(m){this.$MSearchTypeaheadPerfLoggerV217();this.$MSearchTypeaheadPerfLoggerV215();}.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('update',this.onQueryUpdated.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('show',this.onResultsRendered.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('select',this.onResultLinkReady.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('on-enter-pressed',this.onEnterPressed.bind(this)),this.$MSearchTypeaheadPerfLoggerV21.listen('result-selected',this.onResultSelected.bind(this)),i.listen('m:page:render:complete',null,function(m){var n=new k(this.$MSearchTypeaheadPerfLoggerV29),o=new k(m.getData().path),p=Date.now()-this.$MSearchTypeaheadPerfLoggerV210;if(n.getPath()===o.getPath()&&p>=0){var q={tti:p,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,uriPath:n.getPath()};h.post(this.$MSearchTypeaheadPerfLoggerV25,q,{delay:this.$MSearchTypeaheadPerfLoggerV211,retry:true});}this.$MSearchTypeaheadPerfLoggerV29='';}.bind(this)));};l.prototype.destroy=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV213.release();};l.prototype.onEnterPressed=function(m){'use strict';this.$MSearchTypeaheadPerfLoggerV29=m;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};l.prototype.onResultLinkReady=function(m){'use strict';this.$MSearchTypeaheadPerfLoggerV29=m.href;this.$MSearchTypeaheadPerfLoggerV210=Date.now();};l.prototype.onResultsRendered=function(m,n){'use strict';var o=this.$MSearchTypeaheadPerfLoggerV218(),p=this.$MSearchTypeaheadPerfLoggerV219(o);if(p==null)return;if(!this.$MSearchTypeaheadPerfLoggerV220())return;var q=Array.isArray(m)?this.$MSearchTypeaheadPerfLoggerV221(m):this.$MSearchTypeaheadPerfLoggerV221(m.show);if(this.$MSearchTypeaheadPerfLoggerV222(q))return;var r=m.show?q.map(function(v){return {isNullStateSuggestion:o==='',isFromCache:v.isFromCache,isSeeMore:v.isSeeMore};}):q,s=r.every(function(v){return v.isNullStateSuggestion||v.isSeeMore||v.exactMatchKeyword;})&&r.some(function(v){return v.isNullStateSuggestion;}),t=r.every(function(v){return v.exactMatchKeyword||v.isSeeMore;}),u=r.every(function(v){return v.isFromCache||v.isSeeMore||v.exactMatchKeyword;})&&r.some(function(v){return v.isFromCache;})&&!t;this.$MSearchTypeaheadPerfLoggerV23.latencyData.push({query:o,allFromNullState:s,allFromCache:u,allFromEcho:t||q.length===0,latency:Date.now()-p});this.$MSearchTypeaheadPerfLoggerV27=q;};l.prototype.onQueryUpdated=function(m){'use strict';if(this.$MSearchTypeaheadPerfLoggerV220()){this.$MSearchTypeaheadPerfLoggerV23.query=m;this.$MSearchTypeaheadPerfLoggerV26[m]=Date.now();}};l.prototype.onResultSelected=function(m){'use strict';if(m.id){if(m.bootstrapped){this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=true;}else if(m.exactMatchKeyword){this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=true;}else if(m.isSeeMore){this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;}else if(m.isNullStateSuggestion)this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=true;}else if(m.rel>0){var n=this.$MSearchTypeaheadPerfLoggerV28.get(m);if(n)this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=n.bootstrap==1;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=this.$MSearchTypeaheadPerfLoggerV218()==='';}else this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=true;this.$MSearchTypeaheadPerfLoggerV23.click=true;};l.prototype.$MSearchTypeaheadPerfLoggerV215=function(){'use strict';this.$MSearchTypeaheadPerfLoggerV26={};this.$MSearchTypeaheadPerfLoggerV27=[];this.$MSearchTypeaheadPerfLoggerV23.query=null;this.$MSearchTypeaheadPerfLoggerV23.latencyData=[];this.$MSearchTypeaheadPerfLoggerV23.sessionID=null;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=null;this.$MSearchTypeaheadPerfLoggerV23.click=false;this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick=false;this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick=false;this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick=false;this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick=false;};l.prototype.$MSearchTypeaheadPerfLoggerV218=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV21.getValue()||'';};l.prototype.$MSearchTypeaheadPerfLoggerV220=function(){'use strict';return this.$MSearchTypeaheadPerfLoggerV23.sessionID!=null;};l.prototype.$MSearchTypeaheadPerfLoggerV216=function(m,n){'use strict';this.$MSearchTypeaheadPerfLoggerV215();this.$MSearchTypeaheadPerfLoggerV23.sessionID=m;this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime=Date.now();this.$MSearchTypeaheadPerfLoggerV23.query=n;this.$MSearchTypeaheadPerfLoggerV23.typeaheadType=this.$MSearchTypeaheadPerfLoggerV22;};l.prototype.$MSearchTypeaheadPerfLoggerV219=function(m){'use strict';if(this.$MSearchTypeaheadPerfLoggerV26[m]!=null){return this.$MSearchTypeaheadPerfLoggerV26[m];}else return this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime;};l.prototype.$MSearchTypeaheadPerfLoggerV222=function(m){'use strict';var n=this.$MSearchTypeaheadPerfLoggerV27.filter(function(p){return p.id!='seeMore';}).map(function(p){return p.display;}),o=m.filter(function(p){return p.id!='seeMore';}).map(function(p){return p.display;});return n.length==o.length&&n.every(function(p,q){return p==o[q];});};l.prototype.$MSearchTypeaheadPerfLoggerV221=function(m){'use strict';var n=this.$MSearchTypeaheadPerfLoggerV21;return m.filter(function(o){return !o.isInvalidated&&o!==n.loadingIndicator;});};l.prototype.$MSearchTypeaheadPerfLoggerV217=function(){'use strict';var m={query:this.$MSearchTypeaheadPerfLoggerV23.query,latencyData:this.$MSearchTypeaheadPerfLoggerV23.latencyData,typeaheadType:this.$MSearchTypeaheadPerfLoggerV22,sessionID:this.$MSearchTypeaheadPerfLoggerV23.sessionID,sessionStartTime:this.$MSearchTypeaheadPerfLoggerV23.sessionStartTime,click:this.$MSearchTypeaheadPerfLoggerV23.click,isBootstrapClick:this.$MSearchTypeaheadPerfLoggerV23.isBootstrapClick,isExactMatchKeywordClick:this.$MSearchTypeaheadPerfLoggerV23.isExactMatchKeywordClick,isNullStateClick:this.$MSearchTypeaheadPerfLoggerV23.isNullStateClick,isSeeMoreClick:this.$MSearchTypeaheadPerfLoggerV23.isSeeMoreClick};h.post(this.$MSearchTypeaheadPerfLoggerV24,m,{delay:this.$MSearchTypeaheadPerfLoggerV212,retry:true});i.invoke('typeahead-perf-logger-did-log',null,m);};f.exports=l;}),null);
__d('MSearchTypeaheadPerfLoggerUtil',['MLegacyDataStore','MSearchTypeaheadPerfLogger','MSearchTypeaheadPerfLoggerV2','SearchMTouchGlobalOptions'],(function a(b,c,d,e,f,g,h,i,j,k){var l={getNewMSearchTypeaheadPerfLogger:function m(n,o,p){if(k.useNewTypeaheadPerfLogger){return new j(n,o.type,p,h);}else return new i(n,o,p);}};f.exports=l;}),null);
__d('MRecentSearchesUpdater',['Stratcom','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){var j='search-recent-queries';function k(l){'use strict';this.$MRecentSearchesUpdater1=new i();this.$MRecentSearchesUpdater1.addSubscriptions(l.listen('change',this.changeQuery.bind(this)),l.listen('select',this.addRecentSearchWithSelection.bind(this)),l.listen('show',this.changeResults.bind(this)),l.listen('query',this.addRecentSearchWithQuery.bind(this)),l.listen('refreshRecent',this.refreshRecent.bind(this)));}k.prototype.destroy=function(){'use strict';this.$MRecentSearchesUpdater1.release();};k.prototype.refreshRecent=function(){'use strict';h.invoke('refreshRecent',j,{});};k.prototype.changeQuery=function(l){'use strict';this.currentQuery=l;};k.prototype.changeResults=function(l){'use strict';if(l.show){this.results=l.show.slice();}else this.results=l.slice();};k.prototype.addRecentSearchWithQuery=function(){'use strict';h.invoke('addRecentQuery',j,{query:this.currentQuery});};k.prototype.addRecentSearchWithSelection=function(l){'use strict';var m=l&&(l.rel||l.getAttribute('rel'));if(!m){this.addRecentSearchWithQuery();return;}for(var n=0;n<this.results.length;n++)if(this.results[n].id===m)h.invoke('addRecentSearch',j,{result:this.results[n]});};f.exports=k;}),null);
__d('MSearchTypeaheadLogger',['MLegacyDataStore','DOM','MRequest','MTouchClick','Stratcom','SubscriptionsHandler','invariant','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p=1000;function q(s){var t=[];for(var u=s,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++];}else{w=u.next();if(w.done)break;x=w.value;}var y=x,z=y.getAttribute('rel');if(z!=null){var aa={id:z},ba=y.getAttribute('type');if(ba!=null)aa.type=ba;var ca=y.getAttribute('renderType');if(ca!=null)aa.renderType=ca;var da=i.find(y,'a','typeahead-result'),ea=h.get(da);aa=babelHelpers['extends']({},aa,ea);t.push(aa);}}return t;}function r(s,t){this.typeahead=s;this.uri=t;this.initialize();this.emptyQueryResults=[];this.addSubscriptions();}r.prototype.destroy=function(){clearTimeout(this.blurTimeout);this.subscriptions.release();};r.prototype.addSubscriptions=function(){var s=k.hasTouchEvents()?'touchend':'click';if(this.subscriptions)this.subscriptions.release();this.subscriptions=new m();this.subscriptions.addSubscriptions(this.typeahead.listen('focus',function(){var t=this.typeahead.getValue();t!=null||n(0);this.startSession(t,{force:true});}.bind(this)),this.typeahead.listen('change',function(t){var u=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!u.preventSessionStart)this.startSession(t);if(this.sessionInProgress())this.data.query=t;}.bind(this)),this.typeahead.listen('keypress',function(t){this.keypressed+=1;}.bind(this)),this.typeahead.listen('select',function(t){var u=t&&(t.rel||t.getAttribute('rel'));if(!this.data.query)this.data.null_state=1;this.data.click_event=Date.now();if(u){this.data.selected_id=u;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)l.invoke('m:search-typeahead:select',null,{node:t,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this)),this.typeahead.listen('show',function(t){var u=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(!u.preventSessionStart){var v=this.typeahead.getValue();v!=null||n(0);this.startSession(v);}if(this.sessionInProgress())if(t.show){this.results=q(t.show);if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=t.slice().filter(function(w){return !w.isInvalidated;});if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this)),this.typeahead.listen('query',function(t,u){this.data.selected_search=1;this.data.selected_type=u;this.logToServer();}.bind(this)),l.listen(s,'search-activator',function(){this.startSession('',{force:true});}.bind(this)),l.listen(s,'graph-search-activator',function(){this.startSession('',{force:true});}.bind(this)),this.typeahead.listen('scroll',function(){this.data.scrolled=1;}.bind(this)));};r.prototype.updateTypeahead=function(s){this.typeahead=s;this.addSubscriptions();};r.prototype.blur=function(s){this.blurInProgress=true;this.blurTimeout=o(function(){this.data.session_end_reason=s;if(!this.data.query)this.data.null_state=1;this.logToServer();}.bind(this),p);};r.prototype.startSession=function(s){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(this.sessionID==null&&(s||t.force)){this.data={};this.keypressed=0;this.sessionID=Math.random().toString();this.data.query=s;this.data.session_start=Date.now();l.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID,query:s});}};r.prototype.sessionInProgress=function(){if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};r.prototype.logToServer=function(){clearTimeout(this.blurTimeout);if(this.sessionID!=null){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)this.data.candidate_results=this.results;this.data.null_state_candidate_results=this.emptyQueryResults;this.data.last_state=this.getLastState(this.data.query,this.data.candidate_results);var s=new j(this.uri);s.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}this.initialize();};r.prototype.getLastState=function(s,t){var u='typed',v=s.length===0&&t.every(function(w){return w.isNullStateSuggestion;});if(v)u='null_state';return u;};r.prototype.initialize=function(){this.data={};this.sessionID=null;this.keypressed=0;this.results=[];this.blurInProgress=false;};f.exports=r;}),null);
__d("XLiveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/sports\/{?query}\/",{date:{type:"Int"},ref:{type:"String"},source:{type:"String"},region_id:{type:"Int"},year:{type:"Int"},fref:{type:"String"},query:{type:"String"},name:{type:"String"},cursor:{type:"String"}});}),null);
__d('MTypeaheadNullstateSource',['MTypeaheadTouchSource','Stratcom','URI','XLiveController','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n,o='graph-search-entry-point',p='search-recent-queries';m=babelHelpers.inherits(q,h);n=m&&m.prototype;function q(r,s){'use strict';n.constructor.call(this,r,s);i.listen('setCurrentProfileID',o,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));i.listen('addRecentSearch',p,function(event){var t=event.getData().result;if(t)this.addRecentResult(t);}.bind(this));i.listen('addRecentQuery',p,function(event){var t=event.getData().query;if(t){var u=this.makeRecentResultWithQuery(t);this.addRecentResult(u);}}.bind(this));i.listen('refreshRecent',p,function(){this.refresh();}.bind(this));i.listen('searchRefreshNullstate',null,function(){return this.refresh();}.bind(this));i.listen('m:search:refresh-nullstate-with-delay',null,function(){l(function(){this.refresh();}.bind(this),30000);}.bind(this));}q.prototype.makeRecentResultWithQuery=function(r){'use strict';return {display:r,name:r,id:r,uri:'/search/top/?q='+r};};q.prototype.addRecentResult=function(r){'use strict';if(r.isTrending)return;r.isRecentSearch=true;var s={},t=0;r.idx=t;s[r.id]=r;for(var u in this._raw)if(u!=r.id){t++;this._raw[u].idx=t;s[u]=this._raw[u];}this._raw=s;};q.prototype.refresh=function(){'use strict';this._raw={};this.sendRequest();};q.prototype.getAuxiliaryData=function(){'use strict';return {profile_id:this.profileID?this.profileID:this.groupID?this.groupID:null,disable_single_state:this.singleStateDisabled===true,enable_scoped:this.scopedEnabled===true};};q.prototype.ondata=function(r){'use strict';n.ondata.call(this,r.nullstate);};q.prototype.matchResults=function(r){'use strict';var s=[];if(r==='')s=Object.keys(this._raw);this.sortHits(r,s);var t=this.renderNodes(r,s);this.invoke('resultsready',t);this.invoke('complete');};q.prototype.setCurrentProfileID=function(r){'use strict';this.profileID=r;};q.prototype.setForceDisableSingleState=function(r){'use strict';this.singleStateDisabled=r;};q.prototype.setEnableScoped=function(r){'use strict';this.scopedEnabled=r;};q.prototype.sortHits=function(r,s){'use strict';s.sort(this.sortingFunction.bind(this));};q.prototype.sortingFunction=function(r,s){'use strict';var t=this._raw[r],u=isNaN(t.idx)?Number.MAX_VALUE:t.idx,v=this._raw[s],w=isNaN(v.idx)?Number.MAX_VALUE:v.idx;return u-w;};q.prototype.getTransformer=function(){'use strict';return function(r){if(r.keyword_type==='trending'){var s=new j('/topic/trending/'+r.id);if(r.isSport)s=k.getURIBuilder().setString('query',String(r.id)).setString('ref','m_search_null_state').getURI();return {id:r.name,display:r.name,name:r.name,uri:s.toString(),topicID:r.id,trendingQueryID:r.trendingQueryID,subtext:r.articleTitle,type:'trending',photo:r.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true};}if(r.type==='keyword'||r.type==='grammar'){s=new j(r.path||r.uri);return {cost:r.cost,idx:r.idx,display:r.text,name:r.text,type:'keyword',id:r.uid,uri:s.toString(),actionTime:r.action_time,isPYMK:r.pymk,isRecentSearch:r.recent_search,subtext:r.subtext,logInfo:r.logInfo,isNullStateSuggestion:true,isScoped:r.is_scoped};}return {actionTime:r.action_time,name:r.text,uri:r.path||r.uri,id:r.uid||r.id,display:r.name||r.text,photo:r.photo,category:r.category,cost:r.cost,idx:r.idx,tokens:r.tokens,type:r.type[0].toUpperCase()+r.type.slice(1),verticalType:r.vertical_type,is_verified:r.is_verified,subtext:r.subtext,isPYMK:r.pymk,isRecentSearch:r.recent_search,logInfo:r.logInfo,isNullStateSuggestion:true,isScoped:r.is_scoped};};};f.exports=q;}),null);
__d('WebPixelRatio',['getPixelRatio'],(function a(b,c,d,e,f,g,h){'use strict';var i={get:function j(){return h();}};f.exports=i;}),null);
__d('TokenizeUtil',[],(function a(b,c,d,e,f,g){var h=/[ ]+/g,i=/[^ ]+/g,j=new RegExp('[^ '+l()+']+|'+m(),'g'),k=new RegExp(m(),'g');function l(){return '.,+*?$|#{}()\'\\^\\-\\[\\]\\\\\\/!@%"~=<>_:;'+'\u30fb\u3001\u3002\u3008-\u3011\u3014-\u301f\uff1a-\uff1f\uff01-\uff0f'+'\uff3b-\uff40\uff5b-\uff65\u2E2E\u061f\u066a-\u066c\u061b\u060c\u060d'+'\uFD3e\uFD3F\u1801\u0964\u104a\u104b\u2010-\u2027\u2030-\u205e'+'\u00a1-\u00b1\u00b4-\u00b8\u00ba\u00bb\u00bf';}function m(){return '['+l()+']';}var n={},o={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5 \u0101",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b \u0113",f:"\u0444",g:"\u0433 \u011f \u0123",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131 \u012b",j:"\u0439",k:"\u043a \u0138 \u0137",l:"\u043b \u013e \u013a \u0140 \u0142 \u013c",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b \u0146",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f \u016b",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var p in o){var q=o[p].split(' ');for(var r=0;r<q.length;r++)n[q[r]]=p;}function s(aa){return aa?aa.replace(k,' '):'';}function t(aa){aa=aa.toLowerCase();var ba='',ca='';for(var da=aa.length;da--;){ca=aa.charAt(da);ba=(n[ca]||ca)+ba;}return ba.replace(h,' ');}function u(aa){var ba=arguments.length<=1||arguments[1]===undefined?i:arguments[1],ca=[],da=ba.exec(aa);while(da){da=da[0];ca.push(da);da=ba.exec(aa);}return ca;}function v(aa){var ba=arguments.length<=1||arguments[1]===undefined?i:arguments[1],ca={};return function da(ea,fa){if(!Object.prototype.hasOwnProperty.call(ca,ea)){var ga=t(ea),ha=aa(ga);ca[ea]={value:ea,flatValue:ga,tokens:u(ha,ba),isPrefixQuery:ha&&ha[ha.length-1]!=' '};}if(fa&&typeof ca[ea].sortedTokens=='undefined'){ca[ea].sortedTokens=ca[ea].tokens.slice();ca[ea].sortedTokens.sort(function(ia,ja){return ja.length-ia.length;});}return ca[ea];};}var w=v(s),x=v(function(aa){return aa;},j);function y(aa,ba,ca){var da=aa=='query'||aa=='query_punc',ea=aa=='query_punc'?x:w,fa=ea(ba,aa=='prefix'),ga=aa=='prefix'?fa.sortedTokens:fa.tokens,ha=ea(ca).tokens,ia={},ja=fa.isPrefixQuery&&da?ga.length-1:null,ka=function la(ma,na){for(var oa=0;oa<ha.length;++oa){var pa=ha[oa];if(!ia[oa]&&(pa==ma||(da&&na===ja||aa=='prefix')&&pa.indexOf(ma)===0))return ia[oa]=true;}return false;};return Boolean(ga.length&&ga.every(ka));}var z={flatten:t,parse:w,parseIncludingPunctuations:x,getPunctuation:m,makeParse:v,isExactMatch:y.bind(null,'exact'),isQueryMatch:y.bind(null,'query'),isQueryMatchIncludingPunctuations:y.bind(null,'query_punc'),isPrefixMatch:y.bind(null,'prefix'),tokenize:u};f.exports=z;}),null);