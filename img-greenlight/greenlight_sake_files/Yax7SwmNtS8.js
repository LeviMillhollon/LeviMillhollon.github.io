if (self.CavalryLogger) { CavalryLogger.start_js(["\/qCyZ"]); }

__d("ActorSelectorNuxTypes",[],(function a(b,c,d,e,f,g){f.exports={COMPOSER:"composer_seen_count",COMPOSER_COVERED:"composer_covered_seen_count",M_COMPOSER:"m_composer_seen_count",M_UFI:"m_ufi_seen_count",UFI:"ufi_seen_count",UFI_TIMELINE:"ufi_timeline_seen_count",UFI_TIMELINE_COVERED:"ufi_timeline_covered_seen_count"};}),null);
__d("MActorListPayloadTypes",[],(function a(b,c,d,e,f,g){f.exports={COMPOSER_ACTOR_LIST:"composer_actor_list",REQUEST_COMPOSER_ACTOR_LIST:"request_composer_actor_list",REQUEST_UFI_ACTOR_LIST:"request_ufi_actor_list",UFI_ACTOR_LIST:"ufi_actor_list"};}),null);
__d("MActorSelectorNuxPayloadTypes",[],(function a(b,c,d,e,f,g){f.exports={COMPOSER_NUX_STATUS:"composer_nux_status",COMPOSER_NUX_SEEN:"composer_nux_seen",REQUEST_COMPOSER_NUX_STATUS:"request_composer_nux_status",REQUEST_UFI_NUX_STATUS:"request_ufi_nux_status",UFI_NUX_SEEN:"ufi_nux_seen",UFI_NUX_STATUS:"ufi_nux_status"};}),null);
__d('MActorListDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g,h){f.exports=new h();}),null);
__d("XActorListController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/actor_list\/",{actor_list_id:{type:"Int",required:true},payload_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('MActorListStore',['EventEmitter','MActorListDispatcher','MActorListPayloadTypes','MRequest','XActorListController'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m,n,o={},p={};m=babelHelpers.inherits(q,h);n=m&&m.prototype;function q(){'use strict';n.constructor.call(this);this.dispatchToken=i.register(function(r){switch(r.type){case j.REQUEST_COMPOSER_ACTOR_LIST:case j.REQUEST_UFI_ACTOR_LIST:this.$MActorListStore1(r.data.id,r.type);break;case j.COMPOSER_ACTOR_LIST:case j.UFI_ACTOR_LIST:Object.assign(o,r.data.actors);p[r.data.id]=Object.keys(r.data.actors);this.emit('change');break;}}.bind(this));}q.prototype.$MActorListStore1=function(r,s){'use strict';var t=l.getURIBuilder().setInt('actor_list_id',r).setEnum('payload_type',s).getURI();new k(t).send();};q.prototype.getActorData=function(r){'use strict';var s=o[r];return s?s:null;};q.prototype.getActorList=function(r){'use strict';var s=p[r];return s?s.slice():null;};f.exports=new q();}),null);
__d('MActorSelectorFlyout.react',['MFlyout','MLayerDestroyOnHide','MLayerHideOnBlur','ReactDOM','ReactLayer'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m=l.createClass({createLayer:function n(o){var p=this.props,q=p.shown,r=p.className,s=p.contextRef,t=p.isNux,u=babelHelpers.objectWithoutProperties(p,['shown','className','contextRef','isNux']),v=r?r.split(' '):[];v.push('accelerate');var w=t?[i]:[i,j],x=new h(babelHelpers['extends']({},u,{addedBehaviors:w,classNames:v,context:k.findDOMNode(s()),margin:'none',nubalign:'center',offsetY:0,width:'100%'}),o);x.conditionShow(q);return x;},receiveProps:function n(o,p){this.updateBehaviors(p.behaviors,o.behaviors);if(this.layer)this.layer.conditionShow(o.shown);}});f.exports=m;}),null);
__d('MActorSelector.react',['CurrentUser','Image.react','Layout.react','MActorListDispatcher','MActorListStore','MActorSelectorFlyout.react','MXUISpinner.react','React','ReactLayeredComponentMixin_DEPRECATED','ShimButton.react','Stratcom','SubscriptionsHandler','cx','fbglyph','fbt','invariant','ix'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=j.Column,z=j.FillColumn,aa=o.PropTypes,ba=20,ca=32,da=o.createClass({displayName:'MActorSelector',mixins:[p],propTypes:{actorListID:aa.string.isRequired,actorListRequestPayloadType:aa.string.isRequired,coverEnabled:aa.bool.isRequired,flyoutTitle:aa.node,nuxBody:aa.node,onChange:aa.func.isRequired,onCompleteNux:aa.func,selectedActorID:aa.string.isRequired,selectedActorProfilePicURI:aa.string.isRequired,showLoadingIndicator:aa.bool.isRequired,showNux:aa.bool.isRequired},getInitialState:function ea(){var fa=l.getActorList(this.props.actorListID);return {actorListLoaded:fa!=null,hasBeenClicked:false,showFlyout:false};},render:function ea(){var fa=null,ga=null;if(this._isCovered()){ga=x("95410");}else{fa=o.createElement(i,{className:"_jvo _3-99",src:x("142926")});ga=this.props.selectedActorProfilePicURI;}var ha=null;if(this.props.showLoadingIndicator)ha=o.createElement(n,{className:"_1-gi"});return o.createElement('div',{className:"_2g0e",'data-sigil':'touchable',onClick:function(){if(this._ignoreNextClick){this._ignoreNextClick=false;return;}if(this.props.showNux)this.props.onCompleteNux&&this.props.onCompleteNux();this.setState({hasBeenClicked:true,showFlyout:!this.state.showFlyout});}.bind(this),onMouseDown:function(){this._ignoreNextClick=false;}.bind(this),onTouchStart:function(){this._ignoreNextClick=false;}.bind(this),role:'presentation'},ha,o.createElement(i,{className:"_1e_c",height:ba,ref:'profilePic',src:ga,width:ba}),fa);},renderLayers:function ea(){if(!this.state.showFlyout){if(this.props.showNux)return o.createElement(m,{isNux:true,contextRef:function(){return this.refs.profilePic;}.bind(this),position:'above',shown:this.props.showNux},o.createElement(q,{className:"_3nv2",'data-sigil':'touchable',onClick:function(){this.props.onCompleteNux&&this.props.onCompleteNux();}.bind(this)},o.createElement(i,{src:x("143543")})),o.createElement('div',{className:"_2ph_"},this.props.nuxBody,o.createElement('div',{className:"_2pie"},o.createElement('a',{href:this.props.settingsURI},v._("Post Attribution Settings")))));return null;}var fa=null;if(this.state.actorListLoaded){var ga=l.getActorList(this.props.actorListID);Array.isArray(ga)||w(0);var ha=[];ga.map(function(ja){var ka=l.getActorData(ja);ka||w(0);var la=null;if(ja===this.props.selectedActorID)la=o.createElement(y,null,o.createElement('div',{className:"_2pi3"},o.createElement(i,{src:x("138598")})));ha.push(o.createElement('li',{className:"_ru0",'data-sigil':'touchable',key:ja,onClick:function(){if(ja!==this.props.selectedActorID)this.props.onChange(ja);}.bind(this)},o.createElement(j,null,o.createElement(y,null,o.createElement(i,{className:"_1e_c",height:ca,src:ka.profilePicURI,width:ca})),o.createElement(z,null,o.createElement('div',{className:"_3-9a _52jh"},ka.name)),la)));}.bind(this));var ia=null;if(this.props.flyoutTitle)ia=o.createElement('li',{className:"_ru0 _52j9",key:'title'},this.props.flyoutTitle);fa=o.createElement('ul',null,ia,ha);}else fa=o.createElement('div',{className:"_ru1"},o.createElement(n,{size:'large'}));return o.createElement(m,{contextRef:function(){return this.refs.profilePic;}.bind(this),key:'mActorSelectorFlyout_'+this.props.actorListID+'_'+this.props.selectedActorID,onToggle:function(ja){if(!ja){this._ignoreNextClick=true;this.setState({showFlyout:ja});}}.bind(this),position:'below',shown:true},fa);},_subscriptionsHandler:null,_ignoreNextClick:false,componentDidMount:function ea(){this._subscriptionsHandler=new s();this._subscriptionsHandler.addSubscriptions(l.addListener('change',function(){var fa=l.getActorList(this.props.actorListID);if(fa&&!this.state.actorListLoaded)this.setState({actorListLoaded:true});}.bind(this)),r.listen('MActorSelector-close',null,function(){this.setState({showFlyout:false});}.bind(this)));},componentDidUpdate:function ea(fa){if(this.state.showFlyout){var ga=l.getActorList(this.props.actorListID);if(ga===null)k.dispatch({data:{id:this.props.actorListID},type:this.props.actorListRequestPayloadType});}if(this.props.selectedActorProfilePicURI!==fa.selectedActorProfilePicURI)this.setState({showFlyout:false});},componentWillUnmount:function ea(){if(this._subscriptionsHandler){this._subscriptionsHandler.release();this._subscriptionsHandler=null;}},_isCovered:function ea(){return this.props.coverEnabled&&this.props.selectedActorID===h.getID()&&!this.state.hasBeenClicked;}});f.exports=da;}),null);
__d("XActorSelectorNuxSeenWriteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/actor_selector\/nux\/mark_seen\/",{nux_type:{type:"Enum",required:true,enumType:1}});}),null);
__d("XActorSelectorNuxStatusController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/actor_selector\/nux\/status\/",{actor_selector_id:{type:"String",required:true},payload_type:{type:"Enum",required:true,enumType:1}});}),null);
__d('MActorSelectorNuxStore',['ActorSelectorNuxTypes','EventEmitter','MActorSelectorNuxDispatcher','MActorSelectorNuxPayloadTypes','MRequest','XActorSelectorNuxStatusController','XActorSelectorNuxSeenWriteController','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q,r={},s={},t=null,u=false,v=false;p=babelHelpers.inherits(w,i);q=p&&p.prototype;function w(){'use strict';q.constructor.call(this);this.dispatchToken=j.register(function(x){switch(x.type){case k.COMPOSER_NUX_SEEN:this.$MActorSelectorNuxStore1(x.type);u=true;this.emit('change');break;case k.UFI_NUX_SEEN:this.$MActorSelectorNuxStore1(x.type);v=true;this.emit('change');break;case k.COMPOSER_NUX_STATUS:r[x.data.actorSelectorID]=x.data.isEnabled;this.emit('change');break;case k.UFI_NUX_STATUS:s[x.data.actorSelectorID]=x.data.isEnabled;this.emit('change');break;case k.REQUEST_COMPOSER_NUX_STATUS:this.$MActorSelectorNuxStore2(x.type,x.data.actorSelectorID);break;case k.REQUEST_UFI_NUX_STATUS:if(t===null)t=x.data.actorSelectorID;this.$MActorSelectorNuxStore2(x.type,x.data.actorSelectorID);break;}}.bind(this));}w.prototype.canShowComposerNux=function(x){'use strict';if(u)return false;return r[x]||false;};w.prototype.canShowUFINux=function(x){'use strict';if(v)return false;if(x!==t)return false;return s[x]||false;};w.prototype.getUFIActorSelectorIDToShowNux=function(){'use strict';return t;};w.prototype.$MActorSelectorNuxStore1=function(x){'use strict';var y=null;switch(x){case k.COMPOSER_NUX_SEEN:y=h.M_COMPOSER;break;case k.UFI_NUX_SEEN:y=h.M_UFI;break;default:o(0);}var z=n.getURIBuilder().setEnum('nux_type',y).getURI();new l(z).send();};w.prototype.$MActorSelectorNuxStore2=function(x,y){'use strict';var z=m.getURIBuilder().setString('actor_selector_id',y).setEnum('payload_type',x).getURI();new l(z).send();};f.exports=new w();}),null);
__d('onViewportChanged',['EventListener','emptyFunction','getViewportDimensions','requestAnimationFrame'],(function a(b,c,d,e,f,g,h,i,j,k){var l=[],m=false,n=null,o=void 0,p=void 0;function q(){var ba=j.withoutScrollbars();return {top:0,bottom:ba.height,left:0,right:ba.width};}function r(ba,ca){var da={transform:ca||i.thatReturnsArgument,callback:ba,needsUpdate:true};l.push(da);y();t();return {remove:s.bind(null,da),scheduleCheck:w.bind(null,da)};}function s(ba){var ca=l.indexOf(ba);if(ca!==-1){l.splice(ca,1);if(l.length===0){u();n=null;}}}function t(){if(!p){p=h.listen(window,'scroll',x);o=h.listen(window,'resize',v);}}function u(){if(p){p.remove();o.remove();p=o=null;}}function v(){n=null;x();}function w(ba){ba.needsUpdate=true;y();}function x(){l.map(function(ba){return ba.needsUpdate=true;});y();}function y(){if(!m){m=true;k(function(){m=false;aa();});}}function z(ba){if(ba.needsUpdate){ba.needsUpdate=false;return true;}return false;}function aa(){if(!n)n=q();var ba=l.filter(z),ca=ba.map(function(da){return da.transform.call(null,n);});ba.forEach(function(da,ea){return da.callback.call(null,ca[ea]);});}f.exports=r;}),null);
__d('onRectIsWithinViewport',['onViewportChanged'],(function a(b,c,d,e,f,g,h){function i(k,l){return !(k.bottom<l.top||k.top>l.bottom||k.right<l.left||k.left>l.right);}function j(k,l){var m=void 0;function n(p){var q=k();return !!q&&i(q,p);}function o(p){if(m!==p){m=p;l(p);}}return h(o,n);}f.exports=j;}),null);
__d('OnVisible.react',['React','ReactDOM','WebSpeedJSExperiments','getElementRect','onRectIsWithinViewport'],(function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=h.PropTypes,n=h.createClass({displayName:'OnVisible',propTypes:{onVisible:m.func,onHidden:m.func,buffer:m.number},componentDidMount:function o(){this._create();},componentDidUpdate:function o(){this._create();},componentWillUnmount:function o(){this._remove();},reset:function o(){this._remove();this._create();},check:function o(){if(this._listener)this._listener.scheduleCheck();},_create:function o(){if(j.i10s_io_on_visible){this._createObserver();}else this._createListener();},_remove:function o(){if(j.i10s_io_on_visible){this._removeObserver();}else this._removeListener();},_measureElementRect:function o(){if(!this.isMounted())return null;var p=this.props.buffer||0,q=i.findDOMNode(this),r=k(q);if(r.left===0&&r.right===0&&r.top===0&&r.bottom===0)return null;r.left-=p;r.right+=p;r.top-=p;r.bottom+=p;return r;},_createListener:function o(){var p=i.findDOMNode(this);if(this._listener&&p!==this._element)this._removeListener();if(!this._listener){this._element=p;this._listener=l(this._measureElementRect,function(q){var r=q?this.props.onVisible:this.props.onHidden;r&&r();}.bind(this));}},_removeListener:function o(){if(this._listener){this._listener.remove();this._listener=null;}},_createObserver:function o(){var p=i.findDOMNode(this);if(this._observer&&p!==this._element)this._removeObserver();if(!this._observer){var q={rootMargin:this.props.buffer?this.props.buffer:undefined};this._element=p;this._observer=new IntersectionObserver(function(r){r.forEach(function(s){if(s.target===this._element){var t=s.intersectionRatio>0?this.props.onVisible:this.props.onHidden;t&&t();}}.bind(this));}.bind(this),q);this._observer.observe(p);}},_removeObserver:function o(){if(this._observer){this._observer.unobserve(this._element);this._observer.disconnect();this._observer=undefined;}},render:function o(){return h.Children.only(this.props.children);}});f.exports=n;}),null);
__d("XPagesManagerPostAttributionSettingsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/{page_token}\/settings\/post_attribution\/",{page_token:{type:"String",required:true},business_id:{type:"Int"}});}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{});}),null);
__d('MUFIActorSelector.react',['ActorURI','MLegacyDataStore','MActorListPayloadTypes','MActorListStore','MActorSelector.react','MActorSelectorNuxDispatcher','MActorSelectorNuxPayloadTypes','MActorSelectorNuxStore','MFeedUFI','MParent','MRequest','OnVisible.react','React','ReactDOM','ReactComponentWithPureRenderMixin','SubscriptionsHandler','XPagesManagerPostAttributionSettingsController','XUFIActorChangeController','fbt','invariant'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=t.PropTypes,ca=t.createClass({displayName:'MUFIActorSelector',mixins:[v],propTypes:{feedbackTargetID:ba.string.isRequired,location:ba.string.isRequired,initialSelectedActorID:ba.string.isRequired,initialSelectedActorProfilePicURI:ba.string.isRequired,settingsURI:ba.string},getInitialState:function da(){return {isVisible:false,selectedActorID:this.props.initialSelectedActorID,selectedActorProfilePicURI:this.props.initialSelectedActorProfilePicURI,showLoadingIndicator:false,showNux:false};},render:function da(){return t.createElement(s,{onVisible:function(){return this.setState({isVisible:true});}.bind(this),onHidden:function(){return this.setState({isVisible:false});}.bind(this)},t.createElement(l,{actorListID:this.props.feedbackTargetID,actorListRequestPayloadType:j.REQUEST_UFI_ACTOR_LIST,coverEnabled:false,flyoutTitle:this._getFlyoutTitle(),nuxBody:this._getNuxBody(),onChange:this._onChange,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,selectedActorProfilePicURI:this.state.selectedActorProfilePicURI,settingsURI:this._getSettingsURI(),showLoadingIndicator:this.state.showLoadingIndicator,showNux:this.state.isVisible&&this.state.showNux}));},_subscriptionsHandler:null,componentDidMount:function da(){this._subscriptionsHandler=new w();this._subscriptionsHandler.addSubscriptions(o.addListener('change',function(){var ea=o.canShowUFINux(this.props.feedbackTargetID);if(!this.state.showNux&&ea){this.setState({showNux:true});}else if(this.state.showNux&&!ea)this.setState({showNux:false});}.bind(this)));if(this.props.location==='timeline')m.dispatch({data:{actorSelectorID:this.props.feedbackTargetID},type:n.REQUEST_UFI_NUX_STATUS});},componentWillUnmount:function da(){if(this._subscriptionsHandler){this._subscriptionsHandler.release();this._subscriptionsHandler=null;}},_getFlyoutTitle:function da(){return z._("Liking and commenting as:");},_onChange:function da(ea){this.setState({selectedActorID:ea,showLoadingIndicator:true});var fa=h.create(y.getURIBuilder().getURI(),ea),ga=new r(fa).setMethod('POST'),ha={from_actor_id:this.state.selectedActorID,ft_ent_identifier:this.props.feedbackTargetID,location:this.props.location};ga.setData(ha);ga.listen('done',this._createActorChangeSuccessHandler(ea));ga.listen('error',this._createActorChangeErrorHandler());ga.send();var ia=u.findDOMNode(this);if(ia instanceof Element){var ja=q.bySigil(ia,'feed-ufi-metadata');if(ja){var ka=k.getActorData(ea);ka||aa(0);i.set(ja,{actor_id:ea,actor_name:ka.name});}}p.clearCache();},_createActorChangeSuccessHandler:function da(ea){return function(){var fa=k.getActorData(ea);fa||aa(0);this.setState({selectedActorID:ea,selectedActorProfilePicURI:fa.profilePicURI,showLoadingIndicator:false});}.bind(this);},_createActorChangeErrorHandler:function da(){var ea=this.state.selectedActorID,fa=this.state.selectedActorProfilePicURI;return function(){this.setState({selectedActorID:ea,selectedActorProfilePicURI:fa,showLoadingIndicator:false});}.bind(this);},_getNuxBody:function da(){return z._("Like, comment or share as yourself or as one of the Pages you manage.");},_getSettingsURI:function da(){return x.getURIBuilder().setString('page_token',this.props.feedbackTargetOwnerID).getURI();},_onCompleteNux:function da(){m.dispatch({type:n.UFI_NUX_SEEN});}});f.exports=ca;}),null);