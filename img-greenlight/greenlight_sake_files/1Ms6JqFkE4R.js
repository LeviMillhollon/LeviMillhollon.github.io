if (self.CavalryLogger) { CavalryLogger.start_js(["AKfps"]); }

__d("MCompositionPrivacyFields",[],(function a(b,c,d,e,f,g){f.exports={PRIVACY_FBID:"PRIVACY_FBID",CLOSE_DIALOG:"CLOSE_DIALOG",ALREADY_SAVED_STICKY:"ALREADY_SAVED_STICKY",NEVER_SAVE_STICKY:"NEVER_SAVE_STICKY",CUSTOM_LABEL:"CUSTOM_LABEL",CUSTOM_OPTION:"CUSTOM_OPTION"};}),null);
__d("OGComposerConstants",[],(function a(b,c,d,e,f,g){f.exports={EditAttachmentURI:"\/ajax\/composerx\/attachment\/edit\/",ExercisesTypeID:718343998201893,TransitivityStateIntransitive:2};}),null);
__d("PrivacyConst",[],(function a(b,c,d,e,f,g){f.exports={BaseValue:{FRIEND_LIST:129,FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},CustomPrivacyTokens:{FRIENDS:247124075410460,FRIENDS_OF_FRIENDS:498125493540100},FriendsValue:{EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},PostParam:{EVERYONE:300645083384735,NETWORKS_FRIENDS:123780391104836,FRIENDS_OF_FRIENDS:275425949243301,FRIENDS:291667064279714,FRIENDS_MINUS_ACQUAINTANCES:284920934947802,ONLY_ME:286958161406148,FB_ONLY:411331705596297,EVENT_PUBLIC:1493271774218406,EVENT_INVITE_ONLY:599950423437029},PrivacyField:{CURRENT_COMPOSER:8787670733,DEFAULT_COMPOSER:875106179167765,TIMELINE_TAGGED_CONTENT_VISIBILITY:8787530733,WALL_POSTS:8787370733,TAG_EXPANDED_CONTENT:8787795733,SEARCH_BY_PHONE:8787815733,SEARCH_BY_EMAIL:8787820733,CAN_FRIEND:8787540733,DEPRECATED_APP_DEFAULT:8787700733,SEARCH_BY_NAME:8787755733,SEARCH_BY_CONTACT_INFO:8787760733,SCREENNAME:8787335733,CURRENT_ADDRESS:8787355733,FRIENDS:8787365733,WEBSITE:8787375733,STATUS_UPDATES:8787395733,BIRTHDAY:8787510733,BIRTHYEAR:8787805733,CAN_COMMENT:8787535733,CAN_MESSAGE:8787545733,RELATIONSHIPS:8787550733,PROFILE_PICTURE_ALBUM:8787565733,DASHBOARD_ACTIVITY:8787575733,FAMILY:8787585733,INTERESTED_IN_LOOKING_FOR:8787590733,PLACES:8787620733,NAME_DAY:8787810733,LANGUAGES:8787625733,QUOTATIONS:8787630733,ABOUT_ME:8787635733,POLITICAL:8787640733,RELIGIOUS:8787645733,CURRENT_CITY:8787650733,HOMETOWN:8787655733,PROFILE_LIKES_AND_INTERESTS:8787660733,BLURB:8787665733,OTHER_LIKES_AND_INTERESTS:8787680733,SUBSCRIBERS:8787690733,SUBSCRIBED_TO:8787695733,PERSONAL_CONTACT_DEFAULT:8787765733,PAGE_CONTACT_DEFAULT:8787770733,AUTO_GENERATED_FB_EMAIL:8787775733,SKILLS:8787780733,CUSTOM_GENDERS:237760973066217,LOCATION_DO_NOT_WRITE_DIRECTLY:8787785733,SOCIAL_ADS:7719929599,PLATFORM_ADS:126540474531,BASS_ADS:183468681673909,ACTIVITIES:144331422306930,INTERESTS:113693108715766,MUSIC:172372399483077,BOOKS:100725463352700,GAMES:199298603444535,MOVIES:201146206594049,TV_SHOWS:129665560441221,SPORTS_PLAYED:129991670408857,FAVORITE_TEAMS:225288534151802,FAVORITE_ATHLETES:203380763033334,PEOPLE_I_ADMIRE:210380795648667,FAVORITE_FOODS:585935528106425,FAVORITE_RESTAURANTS:172588449584647,FAVORITE_WEBSITES:180412195459106,CLOTHING_BRANDS:397391233714082,LAST_POST_PRIVACY:314763985364212,SECOND_TO_LAST_POST_PRIVACY:321179124722698,PREVIOUS_SECONDARY_COMPOSER:864562253561430,RECENT_COMPOSER:358304524327898,COMPOSER_CUSTOM_INCLUSION:1067668039947624,COMPOSER_CUSTOM_EXCLUSION:1082068668536535,CAN_LIKE_AND_COMMENT_PUBLIC_PROFILE_MEDIA:1269423589794183,CAN_TAG_PUBLIC_PROFILE_MEDIA:260920744319731,CAN_DOWNLOAD_PUBLIC_PROFILE_MEDIA:410249702663051,CAN_SHARE_PUBLIC_PROFILE_MEDIA:1648969422065270,NOW_COMPOSER:421290164697736,BACKSTAGE_PRIVACY:809506612451171,FACEREC_ENROLLMENT:1709697052669794},TagExpansion:{NONE:0,TAGGEES:1,FRIENDS_OF_TAGGEES:2},ExpansionType:{NONE:0,TAGS_ONLY:1}};}),null);
__d('MCompositionUserActions',['MComposition','MCompositionConfigFields','MCompositionDispatcher','MCompositionShareFields','MCompositionStoreID','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k,l){var m=c('MCompositionConstants').ActionTypes;function n(p,q){j.handleUpdateFromUserAction({actionType:p,data:q});}var o={configDisablePhotosUpdate:function p(q){var r={};r[l.CONFIG]={};r[l.CONFIG][i.DISABLE_PHOTOS]=q;n(m.DISABLE_PHOTOS,r);},finalize:function p(){n(m.COMPOSITION_FINALIZE,{});},initialize:function p(q){n(m.COMPOSITION_INITIALIZE,q||{});},shareLinkUpdate:function p(q){var r={};r[l.SHARE]={};r[l.SHARE][k.SHARE_URI]=q;n(m.SHARE_LINK_UPDATE,r);},shareRemoveLinkPreview:function p(q){var r={};r[q]=true;var s={};s[l.SHARE]={};s[l.SHARE][k.DISABLED_LINKS]=r;n(m.SHARE_REMOVE_PREVIEW,s);},minutiaeRemove:function p(){n(m.MINUTIAE_REMOVE,{});},minutiaeSet:function p(q){var r={};r[l.MINUTIAE]=q;n(m.MINUTIAE_SET,r);},photoUpdate:function p(q){var r={};r[l.PHOTO]=q;n(m.PHOTO_CHANGE,r);},placeRemove:function p(){n(m.PLACE_REMOVE,{});},placeSet:function p(q){n(m.PLACE_SET,new h().setStoreData(l.PLACE,q).serialize());},statusUpdate:function p(q){n(m.STATUS_CHANGE,new h().setStoreData(l.STATUS,q).serialize());},withUpdate:function p(q){var r={};r[l.WITH_TAGS]=q;n(m.WITH_CHANGE,r);},groupSellUpdate:function p(q){n(m.GROUP_SELL_UPDATE,new h().setStoreData(l.GROUP_SELL,q).serialize());},privacyUpdate:function p(q){var r={};r[l.PRIVACY]=q;n(m.PRIVACY_CHANGE,r);},formatUpdate:function p(q){var r;n(m.FORMAT_CHANGE,(r={},r[l.FORMAT]=q,r));}};f.exports=o;}),null);
__d('MCompositionPrivacyStore',['MCompositionStore','MCompositionPrivacyFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k){var l=c('MCompositionConstants').ActionTypes,m=new h(j.PRIVACY,i).setRequiredFields(i.PRIVACY_FBID).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.PRIVACY_CHANGE,k.thatReturnsArgument).register();f.exports=m;}),null);
__d('MCompositionShareStore',['MCompositionStore','MCompositionShareFields','MCompositionStoreID','emptyFunction','MCompositionConstants'],(function a(b,c,d,e,f,g,h,i,j,k){var l=c('MCompositionConstants').ActionTypes,m=new h(j.SHARE,i).setHandlerFor(l.COMPOSITION_FINALIZE,k.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,k.thatReturnsArgument).setHandlerFor(l.SHARE_LINK_UPDATE,function(n){return babelHelpers['extends']({},m.getAll(),n);}).setHandlerFor(l.SHARE_REMOVE_PREVIEW,function(n){n=n||{};var o=i.DISABLED_LINKS,p=m.getAll(),q={};q[o]=babelHelpers['extends']({},p[o],n[o]);q[i.SHARE_URI]=null;q[i.LINK_NO_CHANGE]=false;return babelHelpers['extends']({},p,q);}).register();f.exports=m;}),null);
__d('MFriendsTaggerReact',['MLegacyDataStore','DOM','getActiveElement','createDeprecatedProperties','eventsMixinDeprecated','invariant','$'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p){'use strict';this.setRoot(p);i.listen(this.getRoot(),'click',null,this.$MFriendsTaggerReact1.bind(this));}o.prototype.hide=function(){'use strict';j().blur();i.hide(this.getRoot());};o.prototype.show=function(){'use strict';i.show(this.getRoot());this.getTokenizer().component.init();this.onShow&&this.onShow();};o.prototype.clear=function(){'use strict';var p=i.find(this.getRoot(),'div','tokenizer'),q=h.get(p);if(q.tokenizer){this.setEntries([]);this.onClear&&this.onClear();}};o.prototype.hasTokens=function(){'use strict';return this.getEntries().length>0;};o.prototype.getTokens=function(){'use strict';return this.getEntries().reduce(function(p,q){p[q.id]=q;return p;},{});};o.prototype.removeToken=function(p){'use strict';this.getTokenizer().component.onRemoveFromCollection(p);};o.prototype.getEntries=function(){'use strict';return this.getTokenizer().component.getEntries();};o.prototype.setEntries=function(p){'use strict';this.getTokenizer().component.setEntries(p);};o.prototype.$MFriendsTaggerReact1=function(event){'use strict';if(event.getNode('cancel_with_tagger')){this.$MFriendsTaggerReact2();}else if(event.getNode('submit_with_tagger'))this.$MFriendsTaggerReact3();};o.prototype.$MFriendsTaggerReact2=function(){'use strict';this.hide();this.invoke('cancel',{});};o.prototype.$MFriendsTaggerReact3=function(){'use strict';var p=this.getEntries();this.hide();this.invoke('submit',{tokens:p});};o.prototype.getTokenizer=function(){'use strict';var p=i.find(this.getRoot(),'div','tokenizer'),q=h.get(p);q||m(0);q.tokenizer||m(0);return q.tokenizer;};o.prototype.setOnShow=function(p){'use strict';this.onShow=p;};o.prototype.setOnClear=function(p){'use strict';this.onClear=p;};o.fromID=function(p){'use strict';var q=n(p),r=h.get(q);if(!r.$MFriendsTaggerReact4)r.$MFriendsTaggerReact4=new o(q);return r.$MFriendsTaggerReact4;};o.getFriendIds=function(event){'use strict';if(event.friend_ids)return event.friend_ids;return event.tokens.map(function(p){return p.id;});};k(o,{root:null});l(o,['submit','cancel']);f.exports=o;}),null);
__d('MPlacesCategorySelector',['MLegacyDataStore','DOM','MRequest','Stratcom','createDeprecatedProperties','eventsMixinDeprecated'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){function n(o){'use strict';this._root=o;this._listeners=[k.listen('click',[o.getAttribute('data-sigil'),'cancel_places_category_selector'],this._cancel.bind(this)),k.listen('click',[o.getAttribute('data-sigil'),'category_option'],this._submit.bind(this))];this._currentlyMakingServerRequest=false;this._viewcount=1;}n.prototype.hide=function(){'use strict';i.hide(this._root);};n.prototype.show=function(){'use strict';i.show(this._root);};n.prototype.cleanup=function(){'use strict';while(this._listeners.length)this._listeners.pop().remove();};n.prototype._hideCurrentChild=function(){'use strict';for(var o=0;o<this._viewcount-1;o++){if(!this._root.childNodes[o])return;i.hide(this._root.childNodes[o]);}};n.prototype._showCurrentChild=function(){'use strict';if(this._viewcount>=1){var o=this._getCurrentVisibleView();i.show(o);}};n.prototype._deleteLastChild=function(){'use strict';var o=this._root.childElementCount;if(o>=1)i.remove(this._root.childNodes[o-1]);};n.prototype._deleteAllChildren=function(){'use strict';var o=this._root.childElementCount;for(var p=o-1;p>=1;p--)i.remove(this._root.childNodes[p]);if(o>=1)i.show(this._root.childNodes[0]);this._viewcount=1;};n.prototype._getCurrentVisibleView=function(){'use strict';return this._root.childNodes[this._viewcount-1];};n.prototype._submit=function(event){'use strict';if(this._currentlyMakingServerRequest)return;var o=this._getCurrentVisibleView(),p=i.find(o,'*','loading'),q=i.find(o,'div','category-list-view'),r=h.get(event.getNode('category_option'));if(r.haschildren){this._currentlyMakingServerRequest=true;this._hideCurrentChild();i.show(p);i.hide(q);var s=new j('/places/addform/category.php');s.listen('done',function(){this._viewcount=this._viewcount+1;this._hideCurrentChild();this._currentlyMakingServerRequest=false;i.hide(p);i.show(q);}.bind(this));s.addData({parent_category_id:r.id,target_id:this._root.id});s.setMethod('GET');s.send();}else{this._deleteAllChildren();this._currentid=null;var t={category_name:r.name,category_value:r.id};this.hide();this.invoke('submit',t);}event.kill();};n.prototype._cancel=function(event){'use strict';if(this._currentlyMakingServerRequest)return;if(this._viewcount>1){this._deleteLastChild();this._viewcount--;this._showCurrentChild();}else{this.hide();this.invoke('cancel');}};m(n,['submit','cancel']);l(n,{disableFacewebHooks:false});Object.assign(n.prototype,{_root:null,_currentlyMakingServerRequest:null,_viewcount:null});f.exports=n;}),null);
__d('MPlacesAddView',['DOM','FBJSON','MPlacesCategorySelector','MRequest','Stratcom','ge'],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,aa=null,ba=null,ca=null,da=null,ea=null,fa=null,ga=null,ha=null,ia=null,ja=true,ka={init:function la(ma){n=m(ma);if(!n)return;t=h.scry(n,'div','places-category-selector-container')[0];if(t){q=new j(t);p=h.find(n,'div','add-place-form');u=h.find(n,'div','new-place-name');v=h.find(u,'input','');w=h.find(n,'div','new-place-address');x=h.find(w,'input','');y=h.find(n,'div','new-place-phone');z=h.find(y,'input','');aa=h.find(n,'div','new-place-website');ba=h.find(aa,'input','');ca=h.find(n,'div','new-place-zip');da=h.find(ca,'input','');ga=h.scry(n,'input','is_current')[0];r=h.find(n,'span','category_input_display_text');s=h.scry(n,'input','category_input_value')[0];ea=h.scry(n.parentNode.parentNode,'div','place-header')[0];fa=h.find(n,'div','address-error-box');}else v=h.find(n,'input','new-place-name');o=h.find(n,'button','add_place_submit');this._listeners=[l.listen('click','add_place_submit',ka._verifyAndSubmitAddPlace.bind(this)),l.listen('MStructuredComposer:cleanup',null,ka._cleanup.bind(this)),l.listen('m:places:map:move',null,function(event){ha=event.getData().lat;ia=event.getData().lng;}),l.listen('m:places:map:render',null,function(event){var na=i.parse(event.getData(),f.id);ha=na.latitude;ia=na.longitude;})];v.addEventListener('focus',function(){if(ja){v.blur();ja=false;}});if(t){this._listeners.push(l.listen('click','category-selector',ka._showCategorySelector.bind(this)));this._listeners.push(q.listen('cancel',ka._cancelCategorySelector.bind(this)));this._listeners.push(q.listen('submit',ka._submitCategorySelector.bind(this)));}},_cleanup:function la(){while(this._listeners.length)this._listeners.pop().remove();if(q)q.cleanup();},_showCategorySelector:function la(event){if(ea)h.hide(ea);h.hide(p);h.show(t);event.kill();},_showAddButton:function la(){if(!s.value)return false;return true;},_updateCategorySelector:function la(ma){if(r&&ma){var na=ma.category_name,oa=ma.category_value;h.setContent(r,na);if(oa.length!==0){s.value=oa;if(o.disabled&&ka._showAddButton())o.disabled=false;}}},_submitCategorySelector:function la(event){ka._updateCategorySelector(event);h.hide(t);h.show(p);l.invoke('m:places:addplace:show');ja=true;if(ea)h.show(ea);},_cancelCategorySelector:function la(){h.hide(t);h.show(p);l.invoke('m:places:addplace:show');ja=true;if(ea)h.show(ea);},_verifyAndSubmitAddPlace:function la(event){var ma={new_place:true,name:v.value};if(t){ma.phone=z.value;ma.address=x.value;ma.website=ba.value;ma.zip=da.value;}ma.is_current=true;if(ga)ma.is_current=ga.checked;if(ha){ma.latitude=ha;ma.longitude=ia;}if(s){ma.topic_tokens=s;}else{var na=h.scry(n,'span','token');ma.topic_tokens=na;}if(ma.address){var oa=new k('/places/addform/verifyaddress.php');oa.listen('done',function(pa){if(pa.actions.length===1){this._submitData(ma,event);}else event.kill();}.bind(this));oa.setData({address:ma.address,latitude:ma.latitude,longitude:ma.longitude,target_id:fa.id}).setMethod('GET').send();}else this._submitData(ma,event);},_submitData:function la(ma,event){if(ma.name.length!==0){h.hide(n);l.invoke('m:places:addform:submit',null,ma);}else event.kill();}};f.exports=ka;}),null);
__d('MPlaces',['$','DOM','MLegacyDataStore','LoadingIndicator','MRequest','Stratcom','MPageController','MURI','URI','XPlacesUpdateLocationController','ViewerLocationSource','FWLoader'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=c('FWLoader').FW,t={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function u(v){t._JSONLocation=v;},getCurrentJSONLocation:function u(){return t._JSONLocation;},setLocationSearchMode:function u(v){t._currentSearchMode=v;},getLocationSearchMode:function u(){return t._currentSearchMode;},shouldUseFWGeolocation:function u(){return window.FW_ENABLED&&s.isIOS()&&t.enableFWGeolocation;},updateLocation:function u(v){if(v){if(t.shouldUseFWGeolocation())v={coords:v};var w={},x;for(var y=0;y<t.desiredProperties.length;y++){x=t.desiredProperties[y];if(v.coords[x])w[x]=v.coords[x];}if(v.timestamp)w.timestamp=v.timestamp/1000;t._JSONLocation=JSON.stringify(w);t.sendCurrentLocationToServer();if(t.pendingForm){t.submitForm(t.pendingForm);}else if(t.pendingHref)t.gotoPage(t.pendingHref);t.pendingForm=null;t.pendingHref='';m.invoke('location-update',null,{position:v});}},handleError:function u(v){t.clearWatch();m.invoke('location-error',null,{error:v});if(t.pendingForm){t.submitForm(t.pendingForm);t.pendingForm=null;}else if(t.pendingHref){t.gotoPage(t.pendingHref);t.pendingHref='';}},sendCurrentLocationToServer:function u(){var v=Date.now();if(v-t._lastUpdateTime>t.UPDATE_LOCATION_INTERVAL){t._lastUpdateTime=v;var w=q.getURIBuilder().setString('json_location',t._JSONLocation).setEnum('source',r.MSITE_PLACES).getURI();new l(w).setMethod('POST').send();}},gotoPage:function u(v){var w=new p(v);w.addQueryData('json_location',t._JSONLocation);n.load(w);},submitForm:function u(v){v.appendChild(i.create('input',{name:'json_location',type:'hidden',value:t._JSONLocation}));if(!v.onsubmit||v.onsubmit())v.submit();},clearWatch:function u(){if(!t.watchID)return;if(t.shouldUseFWGeolocation()){s.geolocation.clearWatch();}else navigator.geolocation.clearWatch(t.watchID);t.watchID=null;},watchPosition:function u(){if(t.shouldUseFWGeolocation()){t.watchID=1;s.geolocation.watchPosition(t.updateLocation,t.handleError);s.geolocation.getCurrentPosition(t.updateLocation);}else{var v=setTimeout(t.handleError,t.locationOptions.timeout);t.watchID=navigator.geolocation.watchPosition(function(w){clearTimeout(v);t.updateLocation(w);},function(w){clearTimeout(v);t.handleError(w);},t.locationOptions);}},monitorLocation:function u(){t.clearWatch();t.watchPosition();l.listen('postprocess',function(){if(!document.getElementById('place_update')&&t.watchID)t.clearWatch();});},submitFormWithLocation:function u(v){if(typeof v=='string')v=h(v);var w=t;k.show();if(w.watchID&&w._JSONLocation){w.submitForm(v);return;}w.pendingHref='';w.pendingForm=v;w.monitorLocation();return false;},gotoPageWithLocation:function u(v){var w=t;k.show();if(w.watchID&&w._JSONLocation){w.gotoPage(v);return;}w.pendingForm=null;w.pendingHref=v;w.monitorLocation();return false;},onClick:function u(event){event.kill();var v=j.get(event.getNode(t.LINK_SIGIL));t.gotoPageWithLocation(v.href);},onSubmit:function u(event){event.kill();var v=i.find(event.getNode(t.FORM_SIGIL),'form');t.submitFormWithLocation(v);}};f.exports=t;}),null);
__d('MPlacesTagger',['MLegacyDataStore','DOM','MParent','MPlaces','MRequest','Stratcom','MTaggingCounter','MTaggingCounterEvent','$','eventsMixinDeprecated','fbt','FWLoader'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=c('FWLoader').FW;function t(u,v){'use strict';this._root=u;this._addPlaceView=i.find(u,'div','add-place');this._disableFacewebHooks=false;this._errorMessage=i.find(u,'div','error-message');this._isOpen=false;this._searchView=i.find(u,'div','places-search');this._throbber=i.find(u,'div','throbber');this._locationToggle=i.scry(u,'div','location-toggle')[0];this._newPlaceName=i.scry(u,'div','new-place-name')[0];this._overrideLocation=v;if(this._newPlaceName){this._newPlaceNameTextbox=i.find(this._newPlaceName,'input','');}else this._newPlaceNameTextbox=i.find(this._addPlaceView,'input','new-place-name');if(!window.FW_ENABLED)this._placeHeader=i.find(u,'div','place-header');this._listeners=[m.listen('click','cancel_at_tagger',this._cancel.bind(this)),m.listen('click','place_result',this._submit.bind(this)),m.listen('click','add_place_link',this._showAddPlace.bind(this)),m.listen('click','freeform_link',this._submitFreeformPlace.bind(this)),m.listen('click','get-location',this._getLocation.bind(this)),m.listen('click','abort-location',this._abortLocation.bind(this)),m.listen('m:places:addform:submit',null,this._submitAddPlace.bind(this)),m.listen('m:page:unload',null,this.cleanup.bind(this))];}t.prototype.cleanup=function(){'use strict';for(var u=0;u<this._listeners.length;u++)this._listeners[u].remove();this._listeners=[];};t.prototype.getDisableFacewebHooks=function(){'use strict';return this._disableFacewebHooks;};t.prototype.getRoot=function(){'use strict';return this._root;};t.prototype.hide=function(){'use strict';if(window.FW_ENABLED)s.setNavBarButton('','1;');i.hide(this._addPlaceView);i.show(this._searchView);i.hide(this._root);this._isOpen=false;};t.prototype.setDisableFacewebHooks=function(u){'use strict';this._disableFacewebHooks=u;};t.prototype.show=function(){'use strict';this._isOpen=true;if(this._locationToggle)i.hide(this._throbber);if(window.FW_ENABLED){s.setNavBarButton(r._("Cancel"),this._cancel.bind(this));}else if(this._locationToggle&&!this._hasLocation)i.show(this._locationToggle);if(this._locationToggle){this._showed();}else if(this._overrideLocation){setTimeout(function(){m.invoke('m:quicksearch:places:search-with-location',null,this._overrideLocation);this._showed();}.bind(this),0);}else if(!this._hasLocation&&'geolocation' in navigator){n.logEvent(o.GEO_POPUP_LOAD);this._locationListener=m.listen('location-update',null,this._handleLocationUpdate.bind(this));this._errorListener=m.listen('location-error',null,this._handleLocationError.bind(this));k.monitorLocation();}else this._showed();i.show(this._root);};t.prototype._getLocation=function(){'use strict';if(!this._hasLocation&&'geolocation' in navigator){this._locationListener=m.listen('location-update',null,this._handleLocationUpdate.bind(this));this._errorListener=m.listen('location-error',null,this._handleLocationError.bind(this));i.show(this._throbber);i.hide(this._locationToggle);k.monitorLocation();}};t.prototype._abortLocation=function(){'use strict';i.hide(this._throbber);i.hide(this._locationToggle);i.hide(this._errorMessage);};t.prototype._removeListeners=function(){'use strict';this._locationListener.remove();this._errorListener.remove();};t.prototype._handleLocationUpdate=function(event){'use strict';this._removeListeners();this._hasLocation=true;m.invoke('m:quicksearch:places:search');if(!this._locationToggle)n.logEvent(o.GEO_POPUP_SUCCESS);this._showed();};t.prototype._handleLocationError=function(event){'use strict';this._removeListeners();this._hasLocation=false;i.show(this._errorMessage);i.hide(this._throbber);if(this._locationToggle){i.show(this._locationToggle);}else n.logEvent(o.GEO_POPUP_FAIL);this._showed();};t.prototype._showed=function(){'use strict';if(!this._isOpen)return;if(window.FW_ENABLED&&!this.getDisableFacewebHooks()){s.setNavBarTitle(r._("Add a Place"));s.setNavBarButton(r._("Cancel"),this._cancel.bind(this),s.BUTTON_CANCEL,false,'left');}this.invoke('showed');i.show(this._root);};t.prototype._cancel=function(){'use strict';if(!this.invoke('cancel').getPrevented()){m.invoke('m:quicksearch:places:cancel');this.hide();}};t.prototype._submit=function(event){'use strict';if(j.bySigil(event.getTarget(),'place-tagger')!==this._root)return;var u=h.get(event.getNode('place_result'));u.new_place=false;this._placeResult=u;m.invoke('m:quicksearch:places:click',null,{results:event.getNode('id:places_search_results'),selected_result:event.getNode('place_result')});this.invoke('submit',u);event.kill();};t.prototype._showAddPlace=function(event){'use strict';var u=h.get(event.getNode('add_place_link')).name;this._newPlaceNameTextbox.value=u;i.hide(this._searchView);i.show(this._addPlaceView);var v=i.scry(this._addPlaceView,'*','map_view_container')[0];if(v)new l('/places/showmap.php').addData({target_id:v.id}).setMethod('GET').send();m.invoke('m:places:addplace:show');event.kill();};t.prototype._submitAddPlace=function(event){'use strict';var u=event.getData();this.hide();this.invoke('submit',u);event.kill();};t.prototype._submitFreeformPlace=function(event){'use strict';var u=h.get(event.getNode('freeform_link'));this.hide();this.invoke('submit',u);event.kill();};t.fromID=function(u){'use strict';var v=p(u),w=h.get(v);if(!w._placesTagger)w._placesTagger=new t(v);return w._placesTagger;};q(t,['searching','showed','submit','cancel']);Object.assign(t.prototype,{_hasLocation:false,_locationListener:null,_errorListener:null,_root:null,_addPlaceView:null,_errorMessage:null,_newPlaceName:null,_newPlaceNameTextbox:null,_searchView:null,_throbber:null,_listeners:null,_placeResult:null});f.exports=t;}),null);
__d('MComposerDialogClearablePreview',['DOM','MSubscriptionsHandlerMixin','mixin','mixInEventEmitter','MComposerDialogClearablePreviewConstants'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=c('MComposerDialogClearablePreviewConstants').sigils;l=babelHelpers.inherits(o,j(i));m=l&&l.prototype;function o(p,q){'use strict';m.constructor.call(this);this.$MComposerDialogClearablePreview1=q;this.$MComposerDialogClearablePreview2=p;this.addSubscriptions(h.listen(this.$MComposerDialogClearablePreview2,'click',n.CLEAR,this.$MComposerDialogClearablePreview3.bind(this)));}o.prototype.clear=function(){'use strict';this.hide();h.setContent(this.$MComposerDialogClearablePreview1,'');return this;};o.prototype.$MComposerDialogClearablePreview3=function(){'use strict';this.clear();this.emit('clear');return this;};o.prototype.hide=function(){'use strict';h.hide(this.$MComposerDialogClearablePreview2);return this;};o.prototype.setValue=function(p){'use strict';h.setContent(this.$MComposerDialogClearablePreview1,p);this.show();return this;};o.prototype.show=function(){'use strict';h.show(this.$MComposerDialogClearablePreview2);return this;};o.prototype.showIfHasValue=function(){'use strict';return !this.$MComposerDialogClearablePreview1.innerText?this.hide():this.show();};k(o,{clear:true});f.exports=o;}),null);
__d('MComposerOGStrings',['MinutiaeVerbs','OGComposerConstants','fbt'],(function a(b,c,d,e,f,g,h,i,j){var k={getFBTPhrase:function l(m,n,o,p){var q='';switch(m){case h.COMPOSER_FEELS:q=j._("{icon}feeling {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_WATCHES:q=j._("{icon}watching {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_READS:q=j._("{icon}reading {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_LISTENS:q=j._("{icon}listening to {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_DRINKS:q=j._("{icon}drinking {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_EATS:q=j._("{icon}eating {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_PLAYS:q=j._("{icon}playing {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_TRAVELS:q=j._("{icon}traveling to {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_LOOKS_FOR:q=j._("{icon}looking for {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_SUPPORTS:q=j._("{icon}supporting {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_CELEBRATES:q=j._("{icon}celebrating {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_MEETS:q=j._("{icon}meeting {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_GETS:q=j._("{icon}getting {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_MAKES:q=j._("{icon}making {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_GOES_TO:q=j._("{icon}going to {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_THINKS_ABOUT:q=j._("{icon}thinking about {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_REMEMBERS:q=j._("{icon}remembering {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_WRITES_A_NOVEL_ABOUT:q=j._("{icon}writing a novel about {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_SELECTS_VERB:q=j._("{icon}{verb}",[j.param('icon',n),j.param('verb',o)]);break;case h.COMPOSER_OTHER:q=j._("{icon}{object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_VOTES:q=j._("{icon}voting in {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_ATTENDS:q=j._("{icon}attending {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_AGREES:q=j._("{icon}agrees with {object}",[j.param('icon',n),j.param('object',o)]);break;case h.COMPOSER_DISAGREES:q=j._("{icon}disagrees with {object}",[j.param('icon',n),j.param('object',o)]);break;case i.ExercisesTypeID:q=j._("{icon}{object}",[j.param('icon',n),j.param('object',o)]);break;}return q;}};f.exports=k;}),null);
__d('MOpenGraphTagger',['CSS','MLegacyDataStore','DOM','MarauderLogger','MComposerOGStrings','MCompositionShareStore','MRequest','Stratcom','$','cx','eventsMixinDeprecated','fbt'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(u){'use strict';this.setRoot(u);this._prompt=j.find(u,'span','og-composer-prompt');this._defaultPrompt=this._prompt.firstChild;this._defaultIconSelector=j.find(u,'div','og-icon-selector');this._iconSelector=this._defaultIconSelector;this._cancelButton=j.find(u,'button','cancel-og-tagger');this._defaultCancelButtonText=this._cancelButton.firstChild;this._isFromActivityLink=false;j.listen(this.getRoot(),'click',null,this._handleClick.bind(this));this._listeners=[o.listen('click','object_result',function(event){event.prevent();var v=event.getNode('object_result'),w=i.get(v);this._objectID=w.id;this._objectStr=w.name;this._icon=w.icon;this._iconSrc=w.icon_src;this._selectedScore=w.score;this._selectedOriginalID=w.original_id;this._clientTime=w.client_time;this._requestID=w.request_id;this._triggersEventTagExpansion=w.triggers_event_tag_expansion;this._addLoggingDataForNodes(v.parentNode.childNodes);this._showAttachment=m.isEmpty()&&w.show_attachment;this._customIconID=w.custom_icon;this._submit();}.bind(this)),o.listen('click','at_result',function(event){event.prevent();this._selectActionType(i.get(event.getNode('at_result')));k.log('og_composer_verb_selected',undefined,{at_id:this._actionType.id,place_id:this._placeID});}.bind(this)),o.listen('click','quicksearch-input',function(event){if(event.getNode('og-object-search')){var v={at_id:this._actionType.id,place_id:this._placeID};k.log('og_composer_object_search_clicked',undefined,v);}}.bind(this)),o.listen('keyup','quicksearch-input',function(event){var v=event.getNode('quicksearch-input');if(v){this._query=v.value;this._keystrokeCount++;if(this._lastNotBackspacedQuery.indexOf(this._query)!==0)this._lastNotBackspacedQuery=this._query;}}.bind(this)),o.listen('composerReset',null,function(event){this._reset();this._placeID=0;}.bind(this))];o.listen('MStructuredComposer:cleanup',null,function(event){for(var v=0;v<this._listeners.length;v++)this._listeners[v].remove();this._listeners=[];}.bind(this));o.listen('MStructuredComposer-opened',null,function(event){this._compositionID=event.getData().session_id;}.bind(this));}t.prototype.getRoot=function(){'use strict';return this.root;};t.prototype.setRoot=function(u){'use strict';this.root=u;};t.prototype.hide=function(){'use strict';j.hide(this.getRoot());this.toggleIncludedPlaceSelector(false);};t.prototype.show=function(){'use strict';j.show(this.getRoot());};t.prototype.updatePrompt=function(u){'use strict';j.setContent(this._prompt,u);};t.prototype.setPlaceID=function(u){'use strict';this._placeID=u;};t.prototype.setSuggestionMechanism=function(u){'use strict';this._suggestionMechanism=u;};t.prototype.toggleIncludedPlaceSelector=function(u){'use strict';var v=j.scry(this.getRoot(),'div','og_included_place');if(v.length){this._isFromActivityLink=u;if(u){j.show(v[0]);}else j.hide(v[0]);}};t.prototype._handleClick=function(event){'use strict';if(event.getNode('cancel-og-tagger'))this.cancel();};t.prototype._reset=function(){'use strict';var u=j.scry(this.getRoot(),'div','og-object-search');if(u.length!==0){j.hide(u[0]);this._showActionTypeSelector();}this._hideIconSelector();this._actionType=null;this._suggestionMechanism=null;this._typeaheadSessionID=null;this._candidateResults=null;this._query=null;this._selectedScore=null;this._selectedOriginalID=null;this._clientTime=null;this._requestID=null;this._lastNotBackspacedQuery=null;this._keystrokeCount=null;this.updatePrompt(this._defaultPrompt);this.setCancelButtonText(this._defaultCancelButtonText);o.invoke('m:quicksearch:clear');};t.prototype._addLoggingDataForNodes=function(u){'use strict';this._candidateResults=[];this._numResults=u.length;for(var v=0;v<this._numResults;++v){var w=i.get(u[v]);if(this._objectID==w.id)this._selectedPos=v;this._candidateResults[v]=w.id?w.id:0;}};t.prototype._cancelTypeaheadSession=function(){'use strict';if(!this._typeaheadSessionID)return;this._triggersEventTagExpansion=false;this._objectID=null;var u=j.scry(this.getRoot(),'div','object_result');this._addLoggingDataForNodes(u);k.log('og_composer_session_abandoned',undefined,{action_type_id:String(this._actionType.id),place_id:this._placeID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,request_id:this._requestID,candidate_results:this._candidateResults,num_results:this._numResults,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount});};t.prototype.cancel=function(){'use strict';k.log('og_composer_cancel_tagger',undefined,{suggestion_mechanism:this._suggestionMechanism});var u=this._isFromActivityLink;if(this._isFromIconSelector)this.invoke('cancelIconSelection',{action_type_id:this._actionTypeId,query:this._iconSearchInput?this._iconSearchInput.value:''});this._cancelTypeaheadSession();this._reset();this.hide();this.invoke('cancel');if(u)this.invoke('cancelFromActivity');};t.prototype.setCancelButtonText=function(u){'use strict';j.setContent(this._cancelButton,u);};t.prototype._showObjectSearch=function(){'use strict';this._hideActionTypeSelector();j.show(j.find(this.getRoot(),'div','og-object-search'));};t.prototype.selectActionTypeImplicitly=function(u){'use strict';var v=j.scry(this.getRoot(),'div','at_result'),w=false;for(var x=0;x<v.length;x++){var y=i.get(v[x]);if(y.id==u){w=true;break;}}if(!w)return false;this._selectActionType(y);return true;};t.prototype.showIconSelector=function(u,v,w,x){'use strict';this.show();this._hideActionTypeSelector();this.updatePrompt(s._("Select an icon"));this._actionTypeId=u;var y='/platform/og/composer/icon_selector/',z=new n(y).setData({actionTypeID:u,objectID:v,objectStr:w,iconID:x});z.listen('postprocess',this._setUpIconSelector.bind(this));z.send();j.replace(this._iconSelector,this._defaultIconSelector);j.show(this._iconSelector);k.log('og_composer_show_icon_selector');};t.prototype._setUpIconSelector=function(){'use strict';this._iconSelector=j.find(this.getRoot(),'div','og-icon-selector');var u=j.scry(this._iconSelector,'a','remove-token');if(u.length!==0)j.listen(u[0],'click',null,this._cancelIconSelection.bind(this));this._iconSearchInput=j.scry(this._iconSelector,'input','icon-search-input')[0];j.listen(this._iconSelector,'click','og-icon-area',this._selectIcon.bind(this));j.listen(this._iconSelector,'click','original-og-icon',function(){return this.cancel();}.bind(this));this._isFromIconSelector=true;};t.prototype._cancelIconSelection=function(){'use strict';this._reset();this.invoke('clear');};t.prototype._selectIcon=function(event){'use strict';var u=event.getNode('og-icon-area'),v=u.lastChild.cloneNode();j.show(v);var w=j.find(this.getRoot(),'i','token-icon');o.addSigil(v,'token-icon');j.replace(w,v);this._icon=v;this._iconSrc=i.get(v).icon_src;this._customIconID=this._icon.getAttribute('data-icon');var x=this._iconSearchInput?this._iconSearchInput.value:'',y=this._actionTypeId;this._reset();this.invoke('iconChanged',{icon:this._icon,icon_src:this._iconSrc,custom_icon_id:this._customIconID,action_type_id:y,query:x});};t.prototype._selectActionType=function(u){'use strict';this._typeaheadSessionID=String(Math.floor(Date.now()*Math.random()));this._lastNotBackspacedQuery='';this._keystrokeCount=0;this._actionType=u;var v={at_id:this._actionType.id,place_id:this._placeID,sid:this._typeaheadSessionID};o.invoke('m:quicksearch:actionSelected',null,v);this._showObjectSearch();this.updatePrompt(this._actionType.prompt);};t.prototype._hideActionTypeSelector=function(){'use strict';var u=j.scry(this.getRoot(),'div','og_ats');if(u.length!==0)h.conditionClass(u[0],"_51xt",true);};t.prototype._showActionTypeSelector=function(){'use strict';var u=j.scry(this.getRoot(),'div','og_ats');if(u.length!==0)h.conditionClass(u[0],"_51xt",false);};t.prototype._hideIconSelector=function(event){'use strict';this._isFromIconSelector=false;this._actionTypeId=null;j.hide(this._iconSelector);this._showActionTypeSelector();};t.prototype._submit=function(){'use strict';var u={action_type:this._actionType.id,action_type_str:this._actionType.name,object:this._objectID,object_str:this._objectStr,show_attachment:this._showAttachment,icon:this._icon,icon_src:this._iconSrc,fbt_phrase:this._getTagPhrase(this._actionType.id,this._icon,this._objectStr,this._objectID),triggers_event_tag_expansion:this._triggersEventTagExpansion,suggestion_mechanism:this._suggestionMechanism,custom_icon:this._customIconID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,selected_original_id:this._selectedOriginalID,selected_score:this._selectedScore,place_id:this._placeID,client_time:this._clientTime,request_id:this._requestID,display_position:this._selectedPos,num_results:this._numResults,results:this._candidateResults,search_term:this._query,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount};this._reset();this.invoke('submit',u);delete u.icon;delete u.fbt_phrase;k.log('og_composer_object_selected',undefined,u);};t.prototype._getTagPhrase=function(u,v,w,x){'use strict';return l.getFBTPhrase(u,v,w,x);};t.fromID=function(u){'use strict';var v=p(u),w=i.get(v);if(!w._ogTagger)w._ogTagger=new t(v);return w._ogTagger;};r(t,['submit','cancel','clear','iconChanged','cancelFromActivity','cancelIconSelection']);Object.assign(t.prototype,{root:null,_prompt:null,_defaultPrompt:null,_actionType:null,_objectID:null,_objectStr:null,_triggersEventTagExpansion:null,_icon:null,_iconSelector:null,_defaultIconSelector:null,_showAttachment:null,_customIconID:null,_placeID:0,_listeners:null,_suggestionMechanism:null,_typeaheadSessionID:null,_compositionID:null,_selectedOriginalID:null,_selectedScore:null,_clientTime:null,_requestID:null,_selectedPos:null,_numResults:null,_candidateResults:null,_query:null,_lastNotBackspacedQuery:null,_keystrokeCount:null});f.exports=t;}),null);
__d('MPlacesCurrentLocation',['MPlaces'],(function a(b,c,d,e,f,g,h){var i=function j(k){h.setCurrentJSONLocation(k.location);h.setLocationSearchMode(k.mode);if(k.mode==h.locationSearchModes.MODE_CHECKIN)h.monitorLocation();};g.main=i;}),null);
__d('MPlacesInit',['MPlaces','Stratcom'],(function a(b,c,d,e,f,g,h,i){if(typeof window.usingGears!=='undefined')h.locationOptions.enableHighAccuracy=false;i.listen('click',h.LINK_SIGIL,h.onClick);i.listen('submit',h.FORM_SIGIL,h.onSubmit);}),null);
__d("MQuickSearchLogger",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.$MQuickSearchLogger1=false;this.$MQuickSearchLogger2=false;this.$MQuickSearchLogger3=null;}h.prototype.$MQuickSearchLogger4=function(){"use strict";this.$MQuickSearchLogger1=true;this.$MQuickSearchLogger2=false;this.$MQuickSearchLogger5=Math.random();};h.prototype.$MQuickSearchLogger6=function(){"use strict";this.$MQuickSearchLogger1=false;};h.prototype.logSessionStart=function(i){"use strict";};h.prototype.logResults=function(i,j){"use strict";};h.prototype.logClick=function(i){"use strict";};h.prototype.onSearch=function(i){"use strict";if(!this.$MQuickSearchLogger1){this.$MQuickSearchLogger4();this.logSessionStart(i);}this.$MQuickSearchLogger3=i;};h.prototype.onResults=function(i,j){"use strict";this.logResults(i,j);};h.prototype.onCleanup=function(){"use strict";this.$MQuickSearchLogger6();};h.prototype.onClick=function(i){"use strict";if(!this.$MQuickSearchLogger2){this.logClick(i);this.$MQuickSearchLogger2=true;this.$MQuickSearchLogger6();}};h.prototype.getSID=function(){"use strict";return this.$MQuickSearchLogger5;};h.prototype.getLastRequest=function(){"use strict";return this.$MQuickSearchLogger3;};f.exports=h;}),null);
__d('MQuickSearchLoggerPlaces',['MQuickSearchLogger','MarauderLogger','MLegacyDataStore'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){'use strict';l.constructor.call(this);}m.prototype.logSessionStart=function(n){'use strict';i.log('m_checkin_search_session_start',undefined,{sid:this.getSID()});};m.prototype.logResults=function(n,o){'use strict';i.log('m_checkin_search_results',undefined,{sid:this.getSID(),search_experiment:j.get(o).searchExperiment});};m.prototype.logClick=function(n){'use strict';var o=false,p=-1;if(n){var q=j.get(n.selected_result);if(q!==null)o=q.isEventResult;var r=[];if(n.results!==null&&n.results.children!==null)r=n.results.children;for(var s=0;s<r.length;s++){var t=j.get(r[s]);if(q.id===t.id){p=s;break;}}}var u=-1;if(this.getLastRequest()!==null){var v=this.getLastRequest();if(Object.prototype.hasOwnProperty.call(v,'q')&&Object.prototype.hasOwnProperty.call(v.q,'length'))u=this.getLastRequest().q.length;}i.log('m_checkin_search_click',undefined,{sid:this.getSID(),query_length:u,position:p,is_event:o});};f.exports=m;}),null);
__d('MQuickSearchPlaces',['MPlaces','MQuickSearch','MQuickSearchLoggerPlaces','Stratcom'],(function a(b,c,d,e,f,g,h,i,j,k){function l(m){'use strict';var n,o,p=new j(),q=new i(m,p),r=null,s=q.listen('search',function(x){var y=r||h.getCurrentJSONLocation();if(y==n&&x==o){k.context().prevent();return;}n=h.getCurrentJSONLocation();o=x;var z={json_location:n};z[h.locationSearchModes.SEARCH_MODE]=h.getLocationSearchMode();q.maybeAddQueryParameters(z);k.invoke('m:quicksearch:location:change',null,y);}),t=k.listen('m:quicksearch:places:search-with-location',null,function(x){r=x;q.search();}),u=k.listen('m:quicksearch:places:search',null,function(){q.search();}),v=k.listen('m:quicksearch:places:cancel',null,function(){return q.reset();}),w=k.listen('m:quicksearch:places:click',null,function(event){p.onClick(event.getData());});k.listen('m:page:loading',null,function(){k.removeCurrentListener();s.remove();u.remove();t.remove();v.remove();w.remove();s=u=n=o=q=null;});}f.exports=l;}),null);
__d('MPrivacyComposerMenu',['CSS','MLegacyDataStore','DOM','MComposerLogger','MComposerWaterfallEvent','MModalDialog','MCompositionConfigStore','MCompositionConfigFields','MCompositionPrivacyStore','MCompositionPrivacyFields','MCompositionUserActions','MRequest','MViewport','PrivacyConst','Stratcom','SubscriptionsHandler','URI','$','cx','fbt','idx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){function ca(da,ea,fa,ga){'use strict';this._root=y(da);this._hiddenInput=j.find(this._root,'input');this._selectedOption=j.scry(this._root,'tr','checked')[0];this._stickyURI=ea;this._stickyOption=this._selectedOption;this._enableCustomMenu=ga;this._dontSaveSticky=false;this._customLabel=fa;this._listeners=new w();this._listeners.addSubscriptions(p.addChangeListener(function(){return this._handlePrivacyUpdate();}.bind(this)));this._listeners.addSubscriptions(j.listen(this._root,'click','privacy-option',function(ha){var ia=ha.getNode('privacy-option');if(!this._enableCustomMenu||ia!=this.getCustomOption()){this._selectOption(ia);return;}var ja=v.listen('m:viewport:orientation-change',null,this._addHeightConstraint.bind(this));this._addHeightConstraint();var ka=new x('/privacy/custom/edit'),la=p.get(q.PRIVACY_FBID,null),ma=n.get(o.POST_ID,null);ka.setQueryData({privacyID:la,postID:ma});m.open(ka.toString(),function(na){v.invoke('MPrivacyComposerMenu::custom',null,{visible:false,instance:this,selector:this._root});t.scrollToHeader();ja.remove();this._removeHeightConstraint();if(!na.canceled){var oa=na.payload.value,pa=j.scry(this._root,'tr','privacy-option'),qa=false;for(var ra=0;ra<pa.length;ra++)if(i.get(pa[ra]).value==oa){this._selectOption(pa[ra],true);qa=true;break;}if(!qa){this._updateCustomSelectedOption(na.payload.description,oa);var sa=this.getCustomSelectedOption();sa&&this._selectOption(sa,true);}}}.bind(this));v.invoke('MPrivacyComposerMenu::custom',null,{visible:true,instance:this,selector:this._root});}.bind(this)));this._listeners.addSubscriptions(v.listen('MStructuredComposer:reset',null,function(ha){if(this._stickyCustomValue&&this._stickyCustomLabel)this._updateCustomSelectedOption(this._stickyCustomLabel,this._stickyCustomValue);}.bind(this)));this._listeners.addSubscriptions(v.listen('MPrivacyDeferredSelector-loaded',null,function(ha){var ia=ha.getData(),ja=j.find(this._root,'table','privacy-table');if(ja.id==ia.id)this._selectedOption=j.scry(this._root,'tr','checked')[0];this._handlePrivacyUpdate();}.bind(this)));this._listeners.addSubscriptions(v.listen('MPrivacyComposerMenu:updatePrivacy',null,function(ha){var ia=ha.getData();this._selectOption(ia.row,false,ia.log);}.bind(this)));i.set(this._root,{instance:this});}ca.prototype.setShowTagExpansion=function(da){'use strict';var ea=this._root;if(ea){h.conditionClass(ea,"_1oxi",da);h.conditionClass(ea,"_3kaj",da);}};ca.prototype.getIconContent=function(){'use strict';return j.find(this._selectedOption,'i','icon').cloneNode(true);};ca.prototype.getCustomOption=function(){'use strict';return j.find(this._root,'tr','privacy-custom-option');};ca.prototype.getCustomSelectedOption=function(){'use strict';return j.scry(this._root,'tr','privacy-custom-selected-option')[0];};ca.prototype.isCustomSelectedOption=function(){'use strict';return this._selectedOption===this.getCustomSelectedOption();};ca.prototype.getSelectedValue=function(){'use strict';return i.get(this._selectedOption).value;};ca.prototype.getRoot=function(){'use strict';return this._root;};ca.prototype._getCustomLabel=function(){'use strict';var da=this.getCustomSelectedOption();if(!da)return null;var ea=j.scry(da,'span','option-desc')[0];if(ea)return ea.textContent;return null;};ca.prototype._getCustomValue=function(){'use strict';var da=this.getCustomSelectedOption();if(!da)return null;return i.get(da).value;};ca.prototype._selectOption=function(da,ea,fa){'use strict';fa=fa!==undefined?fa:true;var ga=p.get(q.NEVER_SAVE_STICKY,false),ha=i.get(da).value,ia=this._getCustomLabel(),ja=this._getCustomValue(),ka={};ka[q.PRIVACY_FBID]=ha;ka[q.ALREADY_SAVED_STICKY]=ea;ka[q.NEVER_SAVE_STICKY]=ga;ka[q.CLOSE_DIALOG]=true;ka[q.CUSTOM_LABEL]=ia;ka[q.CUSTOM_OPTION]=ja;r.privacyUpdate(ka);if(fa)k.log(l.PRIVACY_ADD,{privacy_setting:ha});};ca.prototype._updateCustomSelectedOption=function(da,ea){'use strict';var fa=j.find(this.getCustomSelectedOption(),'span','option-desc');j.setContent(fa,da);i.set(this.getCustomSelectedOption(),{value:ea});if(ea){j.show(this.getCustomSelectedOption());var ga=j.find(this.getCustomSelectedOption(),'span','plus-label');j.setContent(ga,this._getTagExpansionLabel(ea));}};ca.prototype._getTagExpansionLabel=function(da){'use strict';try{var ea,fa,ga=JSON.parse(da),ha=(((ea=ga)!=null?ea.allow:ea)||[]).indexOf(u.CustomPrivacyTokens.FRIENDS)>=0,ia=((fa=ga)!=null?(fa=fa.settings)!=null?fa.no_tag_expansion:fa:fa)||0;if(ha&&ia===0)return aa._("(+ Friends of Tagged)");return aa._("(+ Tagged)");}catch(ja){}return null;};ca.prototype._addHeightConstraint=function(){'use strict';this._removeHeightConstraint();var da=t.getUseableHeight();this._heightConstraint=t.addHeightConstraint(da);};ca.prototype._removeHeightConstraint=function(){'use strict';if(this._heightConstraint){this._heightConstraint.release();this._heightConstraint=null;}};ca.prototype._handlePrivacyUpdate=function(){'use strict';if(!this._stickyCustomValue&&this.getCustomSelectedOption()){this._stickyCustomValue=this._getCustomValue();this._stickyCustomLabel=this._getCustomLabel();}var da=p.get(q.PRIVACY_FBID,null),ea=p.get(q.ALREADY_SAVED_STICKY,false),fa=p.get(q.NEVER_SAVE_STICKY,false),ga=p.get(q.CLOSE_DIALOG,false),ha=p.get(q.CUSTOM_LABEL),ia=p.get(q.CUSTOM_OPTION);if(ea!==undefined)this._dontSaveSticky=ea;var ja=j.scry(this._root,'tr','privacy-option');if(da===null)da=i.get(this._stickyOption).value;var ka=this._hiddenInput&&this._hiddenInput.value;ga=ga||ka!=da;var la=j.scry(document.body,'button','privacy-button')[0];if(da!==null&&ga){var ma=null;for(var na=0;na<ja.length;na++)if(i.get(ja[na]).value==da)ma=ja[na];if(this.getCustomSelectedOption()&&ia!==null&&ha!==null)this._updateCustomSelectedOption(ha,ia);if(!ma)ma=this.getCustomSelectedOption();if(!ma){if(la)h.conditionShow(la,false);return;}if(this._hiddenInput)this._hiddenInput.value=da;if(this._selectedOption)h.conditionClass(this._selectedOption,'checked',false);this._selectedOption=ma;h.conditionClass(ma,'checked',true);var oa=!!j.scry(ma,'span','plus-label').length,pa=j.find(this._selectedOption,'i','icon').outerHTML,qa=j.find(ma,'span','option-desc'),ra=this._hiddenInput&&this._hiddenInput.value;v.invoke('MPrivacyComposerMenu::change',null,{value:ra,showPlus:oa,iconHTML:pa,optionLabel:qa,instance:this});if(!fa){this._stickyOption=this._selectedOption;this._stickyCustomValue=this._getCustomValue();this._stickyCustomLabel=this._getCustomLabel();if(!this._dontSaveSticky&&this._stickyURI)new s(this._stickyURI).setData({privacyx:ra}).send();}}var sa=n.get(o.DISABLE_PRIVACY,false);if(la&&!sa)h.conditionShow(la,true);};ca.prototype.disable=function(){'use strict';this._listeners.release();};ca.init=function(da,ea,fa,ga){'use strict';return new ca(da,ea,fa,ga);};ca.getInstance=function(da){'use strict';return i.get(da).instance;};f.exports=ca;}),null);
__d('MPrivacyComposerSelector',['Banzai','BanzaiLogger','CSS','MLegacyDataStore','DOM','HTML','MComposerLogger','MComposerWaterfallEvent','MPrivacyComposerMenu','MViewport','Stratcom','Vector','$','cx'],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(w,x){'use strict';this._root=t(w);this._button=l.scry(this._root,'button','privacy-button')[0];if(!this._button)this._button=l.find(this._root,'div','privacy-button');this._buttonIcon=l.find(this._root,'div','privacy-button-icon');this._menu=l.find(this._root,'div','privacy-composer-menu');this._config=x;l.listen(this._root,'click','privacy-button',function(event){if(this.isOpen()){this.hideMenu();n.log(o.PRIVACY_CANCEL);}else{this.showMenu();i.log('MPrivacySelectorConsistencyLoggerConfig',{event:'render',logging_source:'mobile_composer_timeline'});n.log(o.PRIVACY_INTENT);}document&&document.activeElement&&document.activeElement.blur();}.bind(this));r.listen('MPrivacyComposerMenu::change',null,function(y){var z=y.getData();if(z.instance!=p.getInstance(this._menu))return;if(this._config.updatebuttontext){var aa=l.find(this._button,'span','button-text');l.setContent(aa,z.optionLabel.cloneNode(true));}var ba=l.find(this._button,'span','plus-label');if(z.showPlus){l.show(ba);}else l.hide(ba);l.setContent(this._buttonIcon,new m(z.iconHTML));this.hideMenu();}.bind(this));k.set(this._root,{instance:this});}v.prototype.setShowTagExpansion=function(w){'use strict';if(this._root)j.conditionClass(this._root,"_27-k",w);var x=p.getInstance(this._menu);x&&x.setShowTagExpansion(w);};v.prototype.getSelectedValue=function(){'use strict';var w=p.getInstance(this._menu);return w&&w.getSelectedValue();};v.prototype.showMenu=function(){'use strict';l.show(this._menu);r.invoke('MPrivacyComposerMenu::show',null,{selector:this._root});this._heightConstraint=q.addMinHeightConstraint(s.getDim(this._menu).y+s.getPos(this._menu).y);h.post('privacy_selector_interaction',{event:'open_selector'});};v.prototype.hideMenu=function(){'use strict';if(this.isOpen()){l.hide(this._menu);r.invoke('MPrivacyComposerMenu::hide',null,{selector:this._root});this._heightConstraint&&this._heightConstraint.release();h.post('privacy_selector_interaction',{event:'close_selector'});}};v.prototype.isOpen=function(){'use strict';var w=this._menu&&this._menu.style;return w!=null&&w.display!='none';};v.prototype.disableWithSpinner=function(){'use strict';var w=this._config.spinner;l.replace(this._button,w);l.show(w);var x=p.getInstance(this._menu);x&&x.disable();};v.init=function(w,x){'use strict';return new v(w,x);};v.getInstance=function(w){'use strict';return k.get(w).instance;};f.exports=v;}),null);
__d('MProfileIntroCardSuggestedPrompt',['DOM','MRequest','destroyOnUnload'],(function a(b,c,d,e,f,g,h,i,j){function k(l,m,n,o){'use strict';var p=h.listen(m,'click',null,function(q){h.replace(l,n);new i(o).send();q.stop();});j(function(){return p.remove();});}f.exports=k;}),null);